(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[23],{"0Bqi":function(e,t,n){"use strict";var r=n("q1tI"),o=n.n(r),a=n("/MKj"),i=n("q23S"),s=n("Ye/N"),c=n("KNE1"),u=(n("17x9"),n("BlMG")),l=n("n6mq"),d={mask:{backgroundColor:"rgba(0, 0, 0, 0.6)",opacity:1,position:"fixed",top:"0px",bottom:"0px",left:"0px",right:"0px",zIndex:1e3},scroller:{WebkitOverflowScrolling:"touch",overflowY:"scroll",bottom:"0px",left:"0px",right:"0px",top:"0px",position:"fixed",WebkitBoxOrient:"vertical",WebkitBoxDirection:"normal",WebkitFlexDirection:"column",msFlexDirection:"column",flexDirection:"column",WebkitJustifyContent:"space-around",msFlexPack:"distribute",justifyContent:"space-around"},modalContainer:{display:"flex",minHeight:"0px",position:"relative",opacity:1,borderRadius:"6px",margin:"0 auto"},closeButton:{backgroundColor:"Transparent",backgroundRepeat:"no-repeat",border:"none",outline:"none",overflow:"hidden",padding:"10px",position:"fixed",right:"24px",top:"24px"}},p=function(e){var t=function(e){Object(u.a)("unauth.account_switcher_modal.".concat(e))},n=e.renderContent;return o.a.createElement("div",{style:d.mask},o.a.createElement(c.a,{unsafeCSS:"\n.AccountSwitcherModal {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n"}),o.a.createElement("div",{className:"AccountSwitcherModal",onClick:function(){t("empty_space_click"),(0,e.onCloseClick)()},role:"dialog",style:d.scroller},o.a.createElement("div",{onClick:function(e){e.stopPropagation()},role:"dialog",style:d.modalContainer},n(),o.a.createElement("button",{"aria-label":s.a._("close","accessible label for close button"),onClick:function(){t("close_button_click"),(0,e.onCloseClick)()},style:d.closeButton},o.a.createElement(l.n,{accessibilityLabel:s.a._("close","accessible label for close button"),color:"white",icon:"cancel",inline:!0})))))},f=n("3fKP");t.a=Object(a.connect)()((function(e){return r.createElement(p,{onCloseClick:function(){e.onClose&&e.onClose()},renderContent:function(){return r.createElement(l.c,{display:"flex",justifyContent:"center",flex:"grow"},r.createElement(i.a,{container:e.container,email:e.email,isAccountSwitch:!0,isModal:!0,hideAccountSwitchValueProp:e.hideAccountSwitchValueProp,type:f.b.login,signupSource:f.b.login,customLoginTagline:e.customTaglineText||s.a._("Add account","Short text on the button that allows a user to log in to another Pinterest account")}))}})}))},"1yPP":function(e,t,n){},"3fKP":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n("17x9"),o={login:"login",loginMfa:"loginMfa",signup:"signup",personalizedLogin:"personalizedLogin",socialSignupWithAge:"socialSignupWithAge",FBEmailRerequest:"FBEmailRerequest",FBEmailCollection:"FBEmailCollection",emailConfirmation:"emailConfirmation",magicLinkConfirmation:"magicLinkConfirmation",FBEmailAlreadyExist:"FBEmailAlreadyExist"},a={login:"login",loginMfa:"loginMfa",signup:"signup",signupOrPersonalizedLogin:"signupOrPersonalizedLogin",socialSignupWithAge:"socialSignupWithAge",FBEmailRerequest:"FBEmailRerequest",emailConfirmation:"emailConfirmation",magicLinkConfirmation:"magicLinkConfirmation",FBEmailAlreadyExist:"FBEmailAlreadyExist",FBEmailCollection:"FBEmailCollection",respondMessage:"respondMessage"},i={boardPage:"boardPage",boardInvite:"boardInvite",defaultSource:"defaultSource",homePage:"homePage",mwebDefaultSource:"mwebDefaultSource",invite:"invite",login:"login",userFollow:"userFollow",userProfilePage:"userProfilePage",saveButton:"saveButton",actionButton:"actionButton",signupButton:"signupButton",personalizedFlyout:"personalizedFlyout",navigateBoard:"navigateBoard",navigatePin:"navigatePin",navigateInterest:"navigateInterest",unauthHeader:"unauthHeader",unauthBanner:"unauthBanner",visualSearch:"unauthVisualSearch",giftWrap:"giftWrap",loginMfa:"loginMfa"};n.n(r).a.oneOf([i.boardPage,i.boardInvite,i.defaultSource,i.giftWrap,i.homePage,i.invite,i.login,i.mwebDefaultSource,i.navigateBoard,i.navigatePin,i.navigateInterest,i.saveButton,i.signupButton,i.unauthBanner,i.unauthHeader,i.userFollow,i.userProfilePage])},"6LVe":function(e,t,n){"use strict";t.a=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.evt=null,this.handled=!1,this.reuseLast=!1,this.fromHistoryUid=null,this.fromNavigate=!1,this.currentModule=null}},"6MIl":function(e,t){e.exports="https://s.pinimg.com/webapp/style/images/web_nux_location_upsell-19d94840.png"},CzMn:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n("pDoi");function o(e){var t={};return e.forEach((function(e){var n=r.b.localStorage.getItem(e);n&&("signupInterestsPickerStartTime"===e?t.signupInterestsPickerTimeSpent=Date.now()-n:t[e]=n)})),JSON.stringify(t)}function a(){return o(["signupInterestsPickerScrollDown","signupInterestsPickerStartTime"])}function i(){return o(["signupTriedSkipInputName","signupTriedSkipGender","unauthTopicsFollowed"])}},Iucu:function(e,t,n){},KpWN:function(e,t,n){"use strict";var r=function(e,t,n){this.type=e,this.target=t,this.currentTarget=t,this.data=n||{},this.stopped=!1};r.prototype.stopPropagation=function(){this.stopped=!0},r.prototype.shouldPropagate=function(){return!this.stopped},t.a=r},L2Gz:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return d}));var r=n("Ye/N"),o=n("pDoi"),a=n("vvax");n("5239");function i(e,t){return e.some((function(e){return e.id===t.id}))}var s=function(e){return e?Object(a.b)(r.a._("Welcome back, {{ firstName }}!","Header on welcome step of renux"),{firstName:e}):r.a._("Welcome back!","Header on welcome step of renux")};function c(e){var t=[];if(e){var n=Date.now()-72e5,r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=i.value;c.ts>=n&&("string"==typeof c.image_signature&&t.push(c.image_signature),"string"==typeof c.first_pin_image_signature&&t.push(c.first_pin_image_signature))}}catch(u){o=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}}return t}function u(){return{plpImages:c(o.b.localStorage.getItem("visitedPinLandingPagesBeforeLogin")),blpImages:c(o.b.localStorage.getItem("visitedBoardLandingPagesBeforeLogin"))}}function l(e){return e.url.split("/").pop().replace(/(--.*|\.jpg)$/g,"")}function d(e){var t=e.log_data;return t&&JSON.parse(t).source||""}},QbJe:function(e,t,n){"use strict";var r=n("q1tI"),o=n.n(r),a=n("/MKj"),i=(n("Iucu"),n("xdpg")),s=n("L2Gz"),c=n("Ye/N"),u=n("6LVe"),l=(n("1yPP"),n("n6mq")),d=3,p=10,f=["blue","eggplant","green","maroon","midnight","navy","olive","orange","orchid","pine","purple","watermelon"];var m=o.a.memo((function(){var e=function(){for(var e=[],t=0,n=0;n<p;n+=1){e.push([]);for(var r=0;r<d;r+=1){var a=f[t];e[n].push(o.a.createElement("div",{key:n+r,className:"NuxEducationLoaderGrid__column".concat(r)},o.a.createElement(l.c,{color:a,height:155,width:105,dangerouslySetInlineStyle:{__style:{borderRadius:8}}}))),(t+=1)>=f.length&&(t=0)}}return e}();return o.a.createElement("div",{className:"NuxEducationLoaderGrid"},e)}));var h=o.a.memo((function(e){var t=e.selectedInterest,n={label:c.a._("Food and Drink","Title for topic"),images:{"400x":{height:561,url:"https://i.pinimg.com/400x/10/31/0a/10310a3d860e8f7f2a5753612a870f5a.jpg",width:400}}},r={},a=t||n,i=a.label,s=a.images["400x"],u=s.url,d=s.height,p=s.width;r.domain=i.trim().toLowerCase().replace(/\s/g,"").concat(".com"),r.imageHeight=d,r.imageWidth=p,r.imageUrl=u;var f=r.domain,m=r.imageUrl,h=r.imageHeight,g=r.imageWidth;return o.a.createElement("div",{className:"NuxEducationLoaderPin","data-test-id":"nux-loader-pin"},o.a.createElement(l.c,{position:"relative"},o.a.createElement("div",{className:"NuxEducationLoaderPin__pinImage"},o.a.createElement(l.u,{shape:"rounded",height:310,width:210},o.a.createElement(l.p,{alt:c.a._("Pin image","Pin image for nux loading step"),color:"darkGray",fit:"cover",naturalHeight:h,naturalWidth:g,src:m})),o.a.createElement(l.c,{position:"absolute",top:!0,right:!0,marginTop:1,marginRight:1},o.a.createElement("div",{className:"NuxEducationLoaderPin__pinSaveButton"},o.a.createElement(l.d,{accessibilityLabel:c.a._("Save button"),color:"red",text:c.a._("Save","save button for nux loading step"),size:"md"}))),o.a.createElement(l.c,{position:"absolute",bottom:!0,left:!0,margin:2,maxWidth:"90%"},o.a.createElement("div",{className:"NuxEducationLoaderPin__pinLinkButton"},o.a.createElement(l.c,{padding:2,color:"lightGray",display:"flex",justifyContent:"between",alignItems:"center",dangerouslySetInlineStyle:{__style:{borderRadius:4}}},o.a.createElement(l.c,null,o.a.createElement(l.n,{icon:"arrow-up-right",accessibilityLabel:c.a._("link","Pin website url link for nux loading step"),size:14,color:"darkGray"})),o.a.createElement(l.c,{marginLeft:2,height:18,flex:"grow",overflow:"hidden"},o.a.createElement(l.K,{bold:!0,size:"sm",truncate:!0},f))))))))})),g={backgroundColor:"#efefef"},b={transition:"width .4s ease-out"};function y(e,t){return Object.assign({},g,{height:e+"px",borderRadius:t})}function _(e,t,n){return Object.assign({},b,{backgroundColor:e,width:t+"%",borderRadius:n})}var v=function(e){var t=e.color,n=void 0===t?"#333":t,r=e.height,a=void 0===r?8:r,i=e.progress,s=void 0===i?0:i,c=e.outerBorderRadius,u=void 0===c?"10px":c,d=e.innerBorderRadius,p=void 0===d?"inherit":d;return o.a.createElement(l.c,{width:"100%",overflow:"hidden",dangerouslySetInlineStyle:{__style:y(a,u)}},o.a.createElement(l.c,{height:"inherit",dangerouslySetInlineStyle:{__style:_(n,s,p)}}))},w=n("eOdZ"),S=n("joD6"),x=n("U4JR"),E=n("vVbV"),O=n("5239"),k=n("fArA");function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=P(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==C(o)&&"function"!=typeof o?T(r):o,j(T(T(n)),"state",{progressPercent:0}),j(T(T(n)),"incrementStepAndCompleteLoading",(function(){var e=n.props,t=e.incrementNuxStep,r=e.isRenux;(t(),r)||w.a.create("UserStateResource",{state:O.r,value:O.b}).callCreate()})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.dispatchSetNuxStepProgress,r=t.isRenux;r||w.a.create("UserStateResource",{state:O.r,value:O.w}).callCreate(),n("loader"),Object(x.a)(13,{view:r?213:24,viewParameter:261}),this.intervalId=setInterval((function(){return e.setState((function(e){return{progressPercent:Math.min(e.progressPercent+100/17,100)}}))}),300)}},{key:"componentDidUpdate",value:function(e,t){this.state.progressPercent>=100&&(clearInterval(this.intervalId),setTimeout(this.incrementStepAndCompleteLoading,1e3))}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"render",value:function(){var e=this.props,t=e.isRenux,n=e.selectedInterests,r=e.showProgressBar,a=this.state.progressPercent;return o.a.createElement("div",{className:"NuxEducationLoader","data-test-id":"nux-complete-loader"},o.a.createElement(l.c,{alignItems:"center",display:"flex",direction:"row",height:"100%",justifyContent:"center",overflow:"hidden",width:"100%"},o.a.createElement(l.c,{position:"relative",marginLeft:10,marginRight:4},o.a.createElement("div",{className:"NuxEducationLoader__loadingCopyContainer"},o.a.createElement(l.m,{size:"sm"},c.a._("All set!","Title for nux loading step")),o.a.createElement(l.c,{marginTop:4},t?c.a._("We're refreshing your home feed with lots of new Pins...","Details for ReNUX loading step"):c.a._("We're building your home feed with lots of Pins...","Details for nux loading step"))),o.a.createElement("div",{className:"NuxEducationLoader__pinEducationCopyContainer"},o.a.createElement(l.m,{size:"sm"},c.a._("Pins are ideas.","Pin education on NUX loading step")),o.a.createElement(l.c,{marginTop:5},c.a._("They are links saved from around the web","Pin education on NUX loading step")))),o.a.createElement(l.c,{marginRight:5,marginLeft:5,width:344},o.a.createElement(m,null)),o.a.createElement(l.c,null,o.a.createElement(h,{selectedInterest:n[0]}))),r?null:o.a.createElement(l.c,{position:"absolute",top:!0,width:"100%"},o.a.createElement(v,{height:8,color:"#e60023",progress:a})))}}])&&N(n.prototype,r),a&&N(n,a),t}(r.PureComponent),L=Object(k.compose)(Object(a.connect)(null,(function(e){return{dispatchSetNuxStepProgress:function(t){return e(Object(E.a)(t))}}})),S.a)(R),A=n("IZzd"),U=n("028R"),B=n("0/lc");function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=M(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==D(o)&&"function"!=typeof o?z(r):o,H(z(z(n)),"onInstallButtonClicked",(function(){var e=n.props.isRenux;A.a.handleExtensionInstall(n.incrementStepAndCompleteLoading),Object(x.a)(101,{component:17,element:280,view:e?213:24,viewParameter:260})})),H(z(z(n)),"onSkipButtonClick",(function(){var e=n.props.isRenux;Object(x.a)(101,{component:17,element:1150,view:e?213:24,viewParameter:260}),n.incrementStepAndCompleteLoading()})),H(z(z(n)),"incrementStepAndCompleteLoading",(function(){var e=n.props,t=e.incrementNuxStep,r=e.isRenux,o=e.setNuxUpsellProgress;r||o(O.b),t()})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatchSetNuxStepProgress,n=e.isRenux,r=e.setNuxUpsellProgress;n||r(O.w),t("extension"),Object(x.a)(13,{view:n?213:24,viewParameter:260})}},{key:"render",value:function(){var e=this.props.personalizationCopy,t=e.headerText,n=e.subHeaderText;return o.a.createElement(U.a,{header:t,installClick:this.onInstallButtonClicked,skipClick:this.onSkipButtonClick,subheader:n})}}])&&G(n.prototype,r),a&&G(n,a),t}(r.Component),q=Object(a.connect)(null,(function(e,t){return{setNuxUpsellProgress:function(t){return e(Object(B.a)(O.o,t))},dispatchSetNuxStepProgress:function(t){return e(Object(E.a)(t))}}}))(W),K=(n("SPMB"),n("/5zs")),V=n("pLLR");function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ee=function(e){var t=e.isChecked,n=e.label,a=e.selectGender,i=e.value;return o.a.createElement(r.Fragment,null,o.a.createElement(l.c,{"data-test-id":"nux-gender-".concat(n,"-label")},o.a.createElement(l.q,{htmlFor:n},o.a.createElement("div",{className:"NuxGenderSelector"},o.a.createElement(l.c,{alignItems:"center",display:"flex",flex:"none",paddingX:8,paddingY:6},o.a.createElement(l.B,{checked:t,id:n,name:"genderOptions",onChange:a,size:"md",value:n}),o.a.createElement(l.c,{display:"flex",flex:"grow",marginStart:10},i))))),o.a.createElement(l.j,null))},te=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=J(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==Y(o)&&"function"!=typeof o?Z(r):o,$(Z(Z(n)),"state",{customGender:n.props.customGender,gender:n.props.gender,showCustomGenderTextfield:n.props.gender===O.B&&n.props.customGender.length>0,showNextButton:[O.k,O.g].includes(n.props.gender)||n.props.customGender.length>0,showCustomGenderDoneButton:n.props.gender===O.B&&n.props.customGender.length>0}),$(Z(Z(n)),"setCustomGender",(function(e){e.target instanceof HTMLInputElement&&e.target.value.trim().length>0?n.setState({customGender:e.target.value,showCustomGenderDoneButton:!0}):n.state.showNextButton&&e.target instanceof HTMLInputElement?n.setState({customGender:e.target.value,showCustomGenderDoneButton:!1}):n.setState({showCustomGenderDoneButton:!1})})),$(Z(Z(n)),"updateCustomGender",(function(e){var t=e.value;return n.setState({customGender:t,showCustomGenderDoneButton:t.length>0})})),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatchSetNuxStepProgress,n=e.isRenux,r=e.setNuxGenderProgress;t("gender"),n||r(O.w),Object(x.a)(13,{view:n?213:24,viewParameter:3120})}},{key:"onSelectGender",value:function(e){var t=this.props.requestContext,n=this.state,r=n.showCustomGenderTextfield;n.showNextButton?this.setState({gender:e,showCustomGenderTextfield:e===O.B}):e===O.B&&new K.c(t,"web_hide_custom_gender_field").enabled()?this.setState({gender:O.B,showCustomGenderTextfield:!1},this.updateGenderCompleteStep):e===O.B||r?this.setState({gender:O.B,customGender:"",showCustomGenderTextfield:!r,showCustomGenderDoneButton:!1}):this.setState({gender:e},this.updateGenderCompleteStep)}},{key:"setUserStateCompletedGenderStep",value:function(){var e=this.props,t=e.isRenux,n=e.setNuxGenderProgress;t||n(O.b)}},{key:"updateGenderCompleteStep",value:function(){var e=this,t=this.props,n=t.incrementNuxStep,r=t.isRenux,o=t.updateGenderInfo,a=this.state,i=a.customGender,s=a.gender;o(a.showCustomGenderTextfield?{gender:O.B,custom_gender:i.slice(0,30)}:{gender:s}).then((function(){e.setUserStateCompletedGenderStep(),Object(x.a)(101,{component:17,element:241,view:r?213:24,viewParameter:3120}),n()}))}},{key:"submitHandler",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this,t=this.props,n=t.isRenux,a=t.personalizationCopy,i=a.headerText,s=a.subHeaderText,u=this.state,d=u.customGender,p=u.showCustomGenderDoneButton,f=u.showCustomGenderTextfield,m=u.showNextButton,h=f?o.a.createElement(r.Fragment,null,o.a.createElement(l.c,{marginEnd:5},o.a.createElement("input",{className:"NuxGenderSelector","data-test-id":"nux-gender-unspecified-input",id:"customGender",onChange:this.setCustomGender,placeholder:d||c.a._("Enter custom gender","placeholder text for custom gender text field"),style:p?O.j:O.i,type:"text"})),!m&&p&&o.a.createElement("div",{"data-test-id":"nux-gender-unspecified-done-btn"},o.a.createElement(l.d,{color:"red",inline:!0,onClick:function(){return e.updateGenderCompleteStep()},text:c.a._("Done","button text for entering a custom gender type")}))):o.a.createElement(l.m,{size:"sm"},c.a._("Non-binary","Non-binary label for custom gender"));return o.a.createElement(l.c,{display:"flex",direction:"column",height:"100%",justifyContent:"around",paddingY:8,width:"100%"},o.a.createElement(l.c,{direction:"column",display:"flex",paddingX:8,dangerouslySetInlineStyle:{__style:{textAlign:"center"}}},o.a.createElement(l.m,{size:n?"xs":"sm"},i),n&&o.a.createElement(l.K,{align:"center",size:"xl"},s)),o.a.createElement(l.c,null,o.a.createElement(l.j,null),o.a.createElement(ee,{isChecked:!f&&this.state.gender.toLowerCase()===O.g,label:O.g,selectGender:function(){return e.onSelectGender(O.g)},value:o.a.createElement(l.m,{size:"sm"},c.a._("Female"))}),o.a.createElement(ee,{isChecked:!f&&this.state.gender.toLowerCase()===O.k,label:O.k,selectGender:function(){return e.onSelectGender(O.k)},value:o.a.createElement(l.m,{size:"sm"},c.a._("Male"))}),o.a.createElement(ee,{isChecked:f,label:O.B,selectGender:function(){return e.onSelectGender(O.B)},value:h})),m&&o.a.createElement(l.c,{"data-test-id":"nux_gender_next_btn",marginTop:8,marginStart:8,marginEnd:8},o.a.createElement(l.d,{accessibilityLabel:c.a._("Next","go to next nux step"),color:"red",disabled:f&&0===this.state.customGender.length,onClick:function(){return e.updateGenderCompleteStep()},text:c.a._("Next","next nux step button"),type:"button"})))}}])&&X(n.prototype,a),i&&X(n,i),t}(r.PureComponent),ne=Object(k.compose)(Object(a.connect)((function(e){var t=e.viewer;return{gender:t.gender?t.gender:"",customGender:t.customGender?t.customGender:""}}),(function(e,t){return{dispatchSetNuxStepProgress:function(t){return e(Object(E.a)(t))},setNuxGenderProgress:function(t){return e(Object(B.a)(O.q,t))},updateGenderInfo:function(t){return e(Object(B.f)({updateUserData:t}))}}})),V.f)(te),re=n("KpWN"),oe=n("6MIl"),ae=n.n(oe);function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pe=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=ce(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==ie(o)&&"function"!=typeof o?le(r):o,de(le(le(n)),"state",{focused:!1,errorIsOpen:!1}),de(le(le(n)),"handleOnChange",(function(e){n.props.onChange({event:e,value:e.target.value})})),de(le(le(n)),"handleBlur",(function(){n.props.errorMessage&&n.setState({errorIsOpen:!1})})),de(le(le(n)),"handleFocus",(function(){n.props.errorMessage&&n.setState({errorIsOpen:!0})})),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(t,e),n=t,a=[{key:"getDerivedStateFromProps",value:function(e,t){return e.errorMessage!==t.errorMessage?{errorIsOpen:!!e.errorMessage,errorMessage:e.errorMessage}:null}}],(o=[{key:"render",value:function(){var e=this,t=this.props,n=t.id,o=t.name,a=t.options,i=t.value,s={backgroundColor:"white",border:"1px solid #979797",borderRadius:8,cursor:"pointer",height:68,fontSize:20,paddingLeft:32,width:"100%",WebkitAppearance:"none",MozAppearance:"none"};return"Country"===i&&(a.unshift({label:"Country",value:"Country"}),s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){de(e,t,n[t])}))}return e}({},s,{color:"lightGray"})),r.createElement(l.c,{alignItems:"center",display:"flex",position:"relative"},r.createElement(l.c,{alignItems:"center",bottom:!0,color:"white",display:"flex",position:"absolute",dangerouslySetInlineStyle:{__style:{margin:"1px",paddingRight:"31px",paddingLeft:"15px",pointerEvents:"none"}},right:!0,shape:"rounded",top:!0},r.createElement(l.n,{icon:"arrow-down",size:24,color:"darkGray",accessibilityLabel:""})),r.createElement("select",{id:n,name:o,onBlur:this.handleBlur,onFocus:this.handleFocus,onChange:this.handleOnChange,ref:function(t){e.select=t},value:i,style:s},a.map((function(e){return r.createElement("option",{key:e.value,value:e.value,disabled:"Country"===e.value},e.label)}))))}}])&&se(n.prototype,o),a&&se(n,a),t}(r.Component);de(pe,"defaultProps",{options:[]});var fe=function(e){var t=e.defaultOptions,n=e.id,r=e.items,a=e.name,i=e.onChange,s=e.value,c=(r.data||t||[]).sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){var t=e.name,n=e.key;return{label:t.toString(),value:n}}));return o.a.createElement(pe,{id:n,name:a,onChange:i,options:c,value:s})},me=n("zLLH"),he=Object(me.b)({name:"CountriesResource",key:"items"})(fe),ge=Object(me.b)({name:"LocalesResource",key:"items"})(fe),be=n("17x9"),ye=n.n(be),_e=n("oNBt"),ve=n("pDoi"),we=n("XCz/");function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ne=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=Ee(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==Se(o)&&"function"!=typeof o?ke(r):o,Ce(ke(ke(n)),"state",{locale:n.props.reduxLocale||(n.context||{}).locale||O.d,country:n.props.reduxCountry||(n.context||{}).country||O.c,swappingLanguage:!1,swappingCountry:!1}),Ce(ke(ke(n)),"onNextButtonClick",(function(){var e=n.props,t=e.incrementNuxStep,r=e.isRenux,o=e.updateUserInfo,a=e.setNuxLocaleProgress,i=n.state;o({updateUserData:{country:i.country,locale:i.locale}}).then((function(){r||a(O.b),Object(x.a)(101,{component:17,element:10374,view:24,viewParameter:3139}),t()}))})),Ce(ke(ke(n)),"onLocationButtonOnMount",(function(){if(navigator.geolocation){navigator.geolocation.getCurrentPosition((function(e){n.setState({country:n.props.reduxCountry||(n.context||{}).country||O.c}),Object(x.a)(7438)}),(function(){Object(x.a)(7436)}))}})),Ce(ke(ke(n)),"updateLocale",(function(e){var t=e.value;return n.setState({locale:t})})),Ce(ke(ke(n)),"updateCountry",(function(e){var t=e.value;return n.setState({country:t})})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatchSetNuxStepProgress,n=e.isRenux,r=e.requestContext,o=e.setNuxLocaleProgress;n||o(O.w),t("country"),new K.c(r,"web_nux_us_location_upsell").enabled()&&(this.inNuxUsLocationUpsellExp=!0,this.setState({country:"Country"}),this.onLocationButtonOnMount()),ve.b.localStorage.getItem("signupUserLocale")||ve.b.localStorage.getItem("signupUserCountry")||Object(x.a)(13,{view:24,viewParameter:3139})}},{key:"componentDidUpdate",value:function(e,t){var n=this,r=this.props,o=r.toggleLoadingIndicator,a=r.isBizNux,i=r.updateUserInfo,s=t.country,c=t.locale,l=this.state,d=l.country,p=l.locale,f=s!==d,m=c!==p;(f||m)&&i({updateUserData:{country:d,locale:p}}).then((function(){if(f&&(ve.b.localStorage.setItem("signupUserCountry",d),n.setState({swappingCountry:!0})),m){ve.b.localStorage.setItem("signupUserLocale",p);var e=new u.a;e.evt=new re.a("",null,{forceRefresh:1}),a?n.setState({swappingLanguage:!0}):o(!0),_e.a.instance.navigate("/",e)}}))}},{key:"render",value:function(){var e=this.props.personalizationCopy.headerText,t=this.state,n=t.country,r=t.locale,a=t.swappingLanguage,i=t.swappingCountry,s=n;return this.inNuxUsLocationUpsellExp&&!i&&(s="Country"),o.a.createElement(l.c,{display:"flex",direction:"column",height:"100%",padding:8,width:"100%"},o.a.createElement(l.c,{alignItems:"center",dangerouslySetInlineStyle:{__style:{textAlign:"center"}},display:"flex",direction:"column",flex:"grow",justifyContent:"around",marginBottom:8},o.a.createElement(l.c,{width:"100%"},o.a.createElement(l.m,{size:"sm"},e)),o.a.createElement(we.a,{name:"web_nux_us_location_upsell",activate:!1},(function(e){var t=e.group,n=-12,r=-12;return t.includes("enabled_image")&&(n=7,r=6),t.includes("enabled")?o.a.createElement(l.c,{marginBottom:n,marginTop:r},o.a.createElement(l.K,null,c.a._("We'll use this to personalize the Pins and ads you see","location upsell supporting text"))):null})),o.a.createElement(l.c,{width:"100%"},o.a.createElement(l.c,{"data-test-id":"nux-locale-select"},o.a.createElement(ge,{id:"newUserLanguage",name:"locale",onChange:this.updateLocale,value:r})),o.a.createElement(l.c,{marginTop:4,"data-test-id":"nux-country-select"},o.a.createElement(he,{id:"newUserCountry",name:"country",onChange:this.updateCountry,value:s})))),o.a.createElement(l.c,{bottom:!0,"data-test-id":"nux-locale-country-next-btn"},o.a.createElement(l.d,{size:"lg",color:"red",text:c.a._("Next","go to next step"),onClick:this.onNextButtonClick,type:"submit",disabled:a||"Country"===s})),o.a.createElement(we.a,{name:"web_nux_us_location_upsell",activate:!1},(function(e){return e.group.includes("image")?o.a.createElement(l.c,{marginTop:5,marginBottom:-8,marginLeft:-8,marginRight:-8,overflow:"hidden",dangerouslySetInlineStyle:{__style:{borderRadius:8}}},o.a.createElement(l.p,{alt:c.a._("Web Desktop Location Upsell","location upsell image"),src:ae.a,naturalHeight:170,naturalWidth:622})):null})))}}])&&xe(n.prototype,r),a&&xe(n,a),t}(r.PureComponent);Ne.contextTypes={country:ye.a.string,locale:ye.a.string};var Pe=Object(k.compose)(V.f,Object(a.connect)((function(e){var t=e.viewer;return{reduxCountry:t.country?t.country:"",reduxLocale:t.locale?t.locale:""}}),(function(e,t){return{updateUserInfo:function(t){return e(Object(B.f)(t))},setNuxLocaleProgress:function(t){return e(Object(B.a)(O.p,t))},dispatchSetNuxStepProgress:function(t){return e(Object(E.a)(t))}}})))(Ne),Ie=n("D2p8"),Te=n("shJ5"),je=function(e){var t=e.nuxStepIndex,n=e.showCounter,r=e.numSteps;return n&&r>1?o.a.createElement(l.c,null,o.a.createElement(l.K,{size:"md"},Object(i.i)(c.a._("Step {{current}} of {{total}}"),{current:"".concat(t+1),total:"".concat(r)}))):null},Re=40,Le="10px",Ae="15px",Ue="30px",Be="45px",De="85px",Ge=function(e,t,n,r,a){return o.a.createElement(l.c,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",margin:2,width:t},o.a.createElement(l.c,{dangerouslySetInlineStyle:{__style:{marginTop:n===Le?"3px":"0px"}},"data-test-id":"nux-toc-dot",color:e,height:n,shape:"circle",width:n}),r&&o.a.createElement(l.c,{dangerouslySetInlineStyle:{__style:{whiteSpace:a?"nowrap":"",marginTop:n===Le?"6px":"4px"}},"data-test-id":"nux-toc-text",display:"flex",wrap:!0},o.a.createElement(l.K,{align:"center",bold:!0,color:e,size:"sm"},r)))},Me="M24 12a2 2 0 0 1-2 2H7.676l4.631 4.586a2 2 0 1 1-2.829 2.828L0 12l9.478-9.414a2 2 0 0 1 2.829 2.828L7.676 10H22a2 2 0 0 1 2 2";var Fe=o.a.memo((function(e){var t=e.renderType,n=e.currentNuxStep,r=e.steps,a=e.onPrevStepClick,i=r.map((function(e){return e.moduleName})),s=i.indexOf(n.moduleName),u=s>1&&o.a.createElement(l.c,{display:"flex",alignItems:"center"},o.a.createElement(l.o,{accessibilityLabel:c.a._("Go back to previous step","Accessibility label on NUX back button"),dangerouslySetSvgPath:{__path:Me},iconColor:"gray",size:"sm",onClick:a}));if(r.length>1)return o.a.createElement(l.c,{"data-test-id":"nux-toc-container",display:"flex",justifyContent:"between",padding:4},o.a.createElement(l.c,{width:Re},u),o.a.createElement(l.c,{display:"flex",justifyContent:"center"},r.map((function(e,r){return o.a.createElement("div",{key:r},function(e){var r=i.indexOf(e.moduleName)>s,o=r?"darkGray":"red",a=r?Le:Ae,u="",l=Ue,d=!1;if("single"===t){l=Be,d=!0;var p=e.moduleName===n.moduleName,f={NuxGenderStep:c.a._("You","Label for NUX gender step in a table of contents"),NuxLocaleCountryStep:c.a._("Your Language","Label for NUX language/locale step in a table of contents"),NuxPicker:c.a._("Your Interests","Label for NUX topic picker in a table of contents"),NuxExtensionUpsell:c.a._("Your Browser","Label for NUX Browser Extension in a table of contents")};u=p?f[e.moduleName]:""}return"all"===t&&(l=De,u={NuxGenderStep:c.a._("You","Label for NUX gender step in a table of contents, where text should be short since there is not much space to show it"),NuxLocaleCountryStep:c.a._("Language","Label for NUX language/locale step in a table of contents, where text should be short since there is not much space to show it"),NuxPicker:c.a._("Interests","Label for NUX topic picker in a table of contents, where text should be short since there is not much space to show it"),NuxExtensionUpsell:c.a._("Extension","Label for NUX Browser Extension in a table of contents, where text should be short since there is not much space to show it")}[e.moduleName]||""),Ge(o,l,a,u,d)}(e))}))),o.a.createElement(l.c,{width:Re}))}));function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function We(e,t){return!t||"object"!==ze(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ve=["NuxDismissableWelcome","NuxWelcomeNameStep","NuxAboutYouStep","NuxGenderStep","NuxLocaleCountryStep"],Ye=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),We(this,qe(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.isRenux,r=t.isSimpleRenux,o=t.requestContext;document.body&&(document.body.style.overflow="hidden");var a=new K.c(o,"web_renux_moving_bg_pins");n&&!r&&a.enabled()&&(this.windowScrollInterval=window.setInterval((function(){window.scrollBy(0,1)}),50),this.windowScrollTimer=window.setTimeout((function(){window.clearInterval(e.windowScrollInterval)}),12e4)),Ie.c.pause()}},{key:"componentWillUnmount",value:function(){this.windowScrollInterval&&window.clearInterval(this.windowScrollInterval),this.windowScrollTimer&&window.clearTimeout(this.windowScrollTimer),document.body&&(document.body.style.overflow=""),Ie.c.resume()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.displayHide,a=e.onHide,i=e.onPrevStepClick,s=e.nuxStep,u=e.steps,d=e.isLoading,p=e.showCounter,f=e.showTableContents,m=e.showShortRenuxPicker,h=u.map((function(e){return e.moduleName})).indexOf(s.moduleName);return o.a.createElement(l.r,null,o.a.createElement(l.c,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, .5)",zIndex:"999"}},display:"flex",height:"100vh",justifyContent:"center",overflow:"scroll",position:"fixed",width:"100vw",top:!0},o.a.createElement(l.c,{color:"white",dangerouslySetInlineStyle:{__style:{transition:Ve.includes(s.moduleName)?"":"width 0.5s"}},direction:"column",display:"flex",height:"NuxPicker"===s.moduleName&&m?360:640,position:"relative",shape:"rounded",width:Ve.includes(s.moduleName)?544:800},d&&o.a.createElement(Te.a,null),f&&o.a.createElement(r.Fragment,null,o.a.createElement(Fe,{currentNuxStep:s,onPrevStepClick:i,renderType:"dots",steps:u}),o.a.createElement(l.j,null)),o.a.createElement(l.c,{flex:"grow",height:"100%",width:"100%"},t),o.a.createElement(l.c,{position:"absolute",marginEnd:8,marginTop:8,right:!0,top:!0},o.a.createElement(je,{nuxStepIndex:h,showCounter:p,numSteps:u.length}),n&&a&&o.a.createElement(l.o,{accessibilityLabel:c.a._("cancel","close nux modal"),icon:"cancel",onClick:a,size:"sm"})))))}}])&&He(n.prototype,a),i&&He(n,i),t}(r.PureComponent),Xe=n("CzMn"),Je=n("1inl"),Qe=n("rh3l"),Ze=function(e){var t=e.interests,n=e.InterestComponentToRender,r=e.gridContainerRef,a=t&&t.length<1,i=O.l.DESKTOP;return o.a.createElement("div",{style:i.STYLES},o.a.createElement(l.v,{columnWidth:i.COLUMN_WIDTH,comp:n,loadItems:function(){},gutterWidth:i.GUTTER_WIDTH,items:t,minCols:i.COLUMNS,scrollContainer:function(){return r||window}}),o.a.createElement(l.G,{accessibilityLabel:c.a._("Loading topics"),show:a}))},$e=n("N0Eu"),et=function(e){var t=e.interests,n=e.handleInterestClickFn,r=e.interestFlipMessages,a=e.interestsToFlip,i=e.isRenux,u=function(e){e.itemIdx;var s=e.data,c={clickHandler:n(s),interest:s,key:s.id,isRenux:i,isSelected:s.is_followed,flipText:r[s.id]||"",shouldFlip:a.has(s.id),size:"lg_136"};return t.length>0&&ve.b.localStorage.setItem("signupInterestsPickerStartTime",Date.now()),o.a.createElement($e.b,c)},d=t.length>5&&"viewed_recs"===Object(s.d)(t[0]);return o.a.createElement(we.a,{name:"web_nux_picker_pfy_section",isEligible:!i&&d},(function(n){var r=n.anyEnabled,a=t.slice(0,5),i=t.slice(5);return r?o.a.createElement(o.a.Fragment,null,o.a.createElement(l.c,{paddingX:8,marginTop:1,marginBottom:1,wrap:!0},o.a.createElement(l.K,{bold:!0,size:"md"},c.a._("Recommended for you","Title above a personalized list of topics for user to follow"))),o.a.createElement(Ze,Object.assign({},e,{interests:a,InterestComponentToRender:u})),o.a.createElement(l.c,{paddingX:8,marginTop:7,marginBottom:1,wrap:!0},o.a.createElement(l.K,{bold:!0,size:"md"},c.a._("More topics",'Title above list of topics user can follow. Previous section said "Recommended for you"'))),o.a.createElement(Ze,Object.assign({},e,{interests:i,InterestComponentToRender:u}))):o.a.createElement(Ze,Object.assign({},e,{InterestComponentToRender:u}))}))},tt=n("HZII"),nt=function(e){var t=e.categories,n=e.handleInterestClickFn,r=e.interestFlipMessages,a=e.interestsToFlip,i=e.isRenux;return o.a.createElement(l.c,{display:"flex",direction:"row",justifyContent:"between",wrap:!0,paddingX:8},t.map((function(e){return o.a.createElement(l.c,{key:e.title,paddingY:1},o.a.createElement(l.K,{size:"xl",bold:!0},e.title),o.a.createElement(l.c,{direction:"row",display:"flex",justifyContent:"between"},e.interests.map((function(e){var t={clickHandler:n(e),interest:e,key:e.id,isSelected:e.is_followed,isRenux:i,flipText:r[e.id]||"",shouldFlip:a.has(e.id),size:"md_110"};return o.a.createElement(l.c,{key:e.id,padding:1},o.a.createElement($e.b,t))}))))})))};function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ct=n.n(tt)()((function(){ve.b.localStorage.setItem("signupInterestsPickerScrollDown",!0)})),ut=function(e){function t(){var e,n,r,o,a,i,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,u=new Array(c),l=0;l<c;l++)u[l]=arguments[l];return r=this,o=(e=at(t)).call.apply(e,[this].concat(u)),n=!o||"object"!==rt(o)&&"function"!=typeof o?st(r):o,a=st(st(n)),s=function(){var e=n.gridContainer.scrollTop===n.gridContainer.scrollHeight-n.gridContainer.offsetHeight;ct(),n.props.handleBottomScroll(e)},(i="handleScroll")in a?Object.defineProperty(a,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[i]=s,n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.categorized,r=t.categoryProps,a=t.disableScroll,i=t.handleBottomScroll,s=t.handleInterestClickFn,u=t.isRenux,d=t.interests,p=t.showTableOfContents,f=t.interestFlipMessages,m=t.interestsToFlip,h=o.a.createElement(et,{gridContainerRef:this.gridContainer,handleBottomScroll:i,handleInterestClickFn:s,interests:d,isRenux:u,showTableOfContents:p,interestFlipMessages:f,interestsToFlip:m});return n&&r.categories&&(h=o.a.createElement(nt,Object.assign({},this.props,r))),o.a.createElement(l.c,{dangerouslySetInlineStyle:{__style:{paddingBottom:!n&&"40px"}},height:p?"280px":"368px",flex:"grow",overflow:a?"visible":"scrollY",width:"800px"},o.a.createElement("div",{onScroll:this.handleScroll,ref:function(t){e.gridContainer=t}},d.length>0?h:o.a.createElement(l.G,{accessibilityLabel:c.a._("Loading default interests"),show:!0})))}}])&&ot(n.prototype,r),a&&ot(n,a),t}(o.a.Component),lt=n("zwad"),dt=n("XRfM"),pt=n("573u");function ft(e){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){vt(e,t,n[t])}))}return e}function gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yt(e,t){return(yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wt(){var e,t,n=1e3*(t=90-(e=20),e+Math.floor(Math.random()*t)),r=c.a.getLocaleData().locale,o=Object(dt.d)(r,n,{shortform:!0});return function(e){var t=e.length;return e[Math.floor(Math.random()*t)]}([Object(i.i)(c.a.ngettext("{{ formattedNumber }} person collecting ideas about","{{ formattedNumber }} people collecting ideas about",n,"How many people collect ideas about an interest, where interest name is shown underneath this text, and number is formatted in a short form such as 10K or 1万 instead of 10000 when applicable to the locale"),{formattedNumber:o}),Object(i.i)(c.a.ngettext("{{ formattedNumber }} person saving ideas about","{{ formattedNumber }} people saving ideas about",n,"How many people save ideas about an interest, where interest name is shown underneath this text, and number is formatted in a short form such as 10K or 1万 instead of 10000 when applicable to the locale"),{formattedNumber:o}),Object(i.i)(c.a.ngettext("{{ formattedNumber }} person sharing ideas about","{{ formattedNumber }} people sharing ideas about",n,"How many people share ideas about an interest, where interest name is shown underneath this text, and number is formatted in a short form such as 10K or 1万 instead of 10000 when applicable to the locale"),{formattedNumber:o})])}var St=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=bt(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==ft(o)&&"function"!=typeof o?_t(r):o,vt(_t(_t(n)),"state",{defaultInterests:[],defaultInterestsSet:new Set,categoryProps:{},contextualMap:{},addedContextualTopics:new Set,interestFlipMessages:{},interestsToFlip:new Set,numTopicsToShow:null}),vt(_t(_t(n)),"setShortenedRenuxExp",(function(e){var t=n.props,r=t.inShortenedEnabled,o=t.activateShortenedExpFn,a=t.setShortenedRenuxContainer;e.length>0&&"viewed_recs"===Object(s.d)(e[0])&&o&&(o(),r&&(a(),n.setState({numTopicsToShow:5})))})),vt(_t(_t(n)),"calculateCategories",(function(){var e={},t=n.getInterestsWithUpdatedIsFollowed(),r=n.handleInterestClickFn;t.forEach((function(t){var n=t.nux_category||"";Object.keys(e).includes(n)?e[n].push(t):e[n]=[t]}));var o=[];if(Object.keys(e).forEach((function(t){o.push({title:t,interests:e[t]})})),6===o.length){for(var a=0;a<o.length;a++){var i=o[a];if(""===i.title||!i.interests||3!==i.interests.length)return}n.setState({categoryProps:{categories:o,handleInterestClickFn:r}})}})),vt(_t(_t(n)),"handleInterestClickFn",(function(e){return function(){var t=n.props,r=t.selectedInterests,o=t.onSelectedInterestsChange,a=!Object(s.b)(r,e);o([e],a),n.logInterestClick(a),n.setState({interestsToFlip:new Set([e.id])}),n.contextualUpdateInterests(new Set([e.id]))}})),vt(_t(_t(n)),"logInterestClick",(function(e){var t=n.props.isRenux,r=e?1030:1151;Object(x.a)(101,{component:36,element:r,view:t?213:24,viewParameter:172})})),vt(_t(_t(n)),"componentName",O.s),vt(_t(_t(n)),"recordRenderLogToServer",(function(){var e=n.renderTimers.pop();e.end(),Qe.default.logToServer(Qe.default.SERVER_LOG_TYPE.RENDER_TIME,Qe.default.HTTP_METHOD.POST,{timing:e.getCompletedTime(),component:n.componentName})})),vt(_t(_t(n)),"renderTimers",[]),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yt(e,t)}(t,e),n=t,(r=[{key:"getExtraImageSignal",value:function(){var e=Object(s.a)(),t=e.plpImages,n=e.blpImages,r=this.props.mostRecentPinImages,o=t.concat(n);return r.concat(o)}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.hideFollowedInterests,r=t.isRenux,o=t.selectedInterests,a=t.limited,i=t.keepFollowingEnabledGroup,s=this.state.interestFlipMessages;w.a.create("NuxInterestsResource",{is_renux:r,logNetworkTimer:!0,loggerComponentName:O.s,extraImageSignal:this.getExtraImageSignal(),hideFollowedInterests:n,defaultNuxInterestsOnly:i,limited:a,urlParams:lt.a.getQueryStringParams()}).callGet({showError:!1},{retries:1}).then((function(t){if(t.resource_response&&t.resource_response.data){e.logSignupTiming();var n=e.mapInterestsForDisplay(o,t.resource_response.data);e.setShortenedRenuxExp(n),e.setState({defaultInterests:n}),e.getInterestsWithUpdatedIsFollowed().length>0&&e.calculateCategories();var r=new Set;n.forEach((function(e){!0===e.is_followed&&r.add(e.id)})),Object.keys(r).length>0&&e.contextualUpdateInterests(r);var a=ht({},s);n.forEach((function(e){s[e.id]||(a[e.id]=wt())})),e.setState({interestsToFlip:new Set(Object.keys(r)),interestFlipMessages:a})}})).catch((function(e){Je.a&&Je.a.showError(e.message||c.a._("Unable to load topics","Error message when failed to load topics."))}))}},{key:"UNSAFE_componentWillUpdate",value:function(e,t){this.state.defaultInterests!==t.defaultInterests&&this.renderTimers.unshift((new pt.a).start())}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.defaultInterests;n!==t.defaultInterests&&(this.renderTimers.length&&this.recordRenderLogToServer(),this.calculateCategories()),n.length>0&&0===t.defaultInterests.length&&this.props.preselect&&this.preselectInterests()}},{key:"getInterestsWithUpdatedIsFollowed",value:function(){var e=this.props.selectedInterests;return this.state.defaultInterests.map((function(t){return t.is_followed=Object(s.b)(e,t),t}))}},{key:"logSignupTiming",value:function(){var e=ve.b.localStorage.getItem("signupTime");if(e){var t=Date.now()-e;t<O.x&&Qe.default.logToServer(Qe.default.SERVER_LOG_TYPE.SIGNUP_LOAD,Qe.default.HTTP_METHOD.POST,{timing:t,component:"nux"}),ve.b.localStorage.removeItem("signupTime")}}},{key:"mapInterestsForDisplay",value:function(e,t){var n=this,r=t.map((function(e){return ht({},e,{is_followed:!n.props.keepFollowingEnabledGroup&&e.is_followed,label:e.name})}));this.props.onSelectedInterestsChange(r.filter((function(e){return e.is_followed})),!0);var o=new Set(e.map((function(e){return e.id}))),a=r.filter((function(e){return!o.has(e.id)}));return e.concat(a)}},{key:"preselectInterests",value:function(){var e=this.props,t=e.numberToFollow,n=e.onSelectedInterestsChange,r=this.state.defaultInterests,o=t||O.f;n(r.slice(0,o),!0)}},{key:"contextualUpdateInterests",value:function(e){var t=this.state,n=t.defaultInterests,r=t.defaultInterestsSet,o=t.addedContextualTopics,a=[],i=[],s=!1;n.forEach((function(t){if(a.push(t),r.add(t.id),e.has(t.id)&&!o.has(t.id)){var n=t.contextual_interests.filter((function(e){return!r.has(e.id)}));n.length>0&&("InsertionStrategy.INSERT_INPLACE"===t.contextual_insertion_strategy?a.push.apply(a,mt(n)):"InsertionStrategy.INSERT_AT_THE_END"===t.contextual_insertion_strategy&&i.push.apply(i,mt(n)),n.forEach((function(e){r.add(e.id)})),s=!0)}})),i.length>0&&a.push.apply(a,i),s&&this.setState({addedContextualTopics:new Set(mt(o).concat(mt(e))),defaultInterests:a})}},{key:"render",value:function(){var e=this.props,t=e.categorized,n=e.handleBottomScroll,r=e.isRenux,a=e.showTableOfContents,i=this.state,s=i.interestFlipMessages,c=i.interestsToFlip,u=i.numTopicsToShow,l=this.getInterestsWithUpdatedIsFollowed();return o.a.createElement(ut,{categorized:t,categoryProps:this.state.categoryProps,disableScroll:!!u&&u<=5,handleBottomScroll:n,handleInterestClickFn:this.handleInterestClickFn,interests:u?l.slice(0,u):l,interestFlipMessages:s,interestsToFlip:c,isRenux:!!r,showTableOfContents:a})}}])&&gt(n.prototype,r),a&&gt(n,a),t}(r.Component),xt=Object(a.connect)((function(e){var t=e.mostRecentPin;return{mostRecentPinImages:t&&t.plp_image_signatures?t.plp_image_signatures:[]}}),(function(){return{}}))((function(e){return o.a.createElement(we.a,{name:"web_renux_keep_following",isEligible:e.isRenux},(function(t){var n=t.anyEnabled;return o.a.createElement(we.a,{name:"web_renux_short",isEligible:e.isRenux&&!e.isSimpleRenux,activate:!1},(function(t){var r=t.anyEnabled,a=t.customActivate;return o.a.createElement(St,Object.assign({},e,{keepFollowingEnabledGroup:n,inShortenedEnabled:r,activateShortenedExpFn:a}))}))}))})),Et=n("DzJC"),Ot=n.n(Et),kt=n("vvax");function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Rt(e,t,n[t])}))}return e}function Pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function It(e){return(It=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tt(e,t){return(Tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Lt=o.a.createElement(l.c,{dangerouslySetInlineStyle:{__style:{background:"linear-gradient(rgba(255, 255, 255, 0), rgba(255, 255, 255, 1))"}},height:40,left:!0,marginTop:-10,position:"absolute",right:!0,top:!0}),At=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=It(t).call(this,e),n=!o||"object"!==Ct(o)&&"function"!=typeof o?jt(r):o,Rt(jt(jt(n)),"getButtonState",(function(e,t,r,o){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=n.props,u=s.hideFollowedInterests,l=s.isRenux,d=s.pickButtonTextGenerator,p=e.length,f=a&&p>=O.m,m=f?0:Math.max(0,t-p),h=o.nextButtonText,g=o.completionNextButtonText,b=d(m),y={done:{buttonText:g||c.a._("Done"),isDisabled:!1,allowSkip:!1},more:{buttonText:l&&u?c.a._("Next","go to next step"):i.i(h||b,{numberLeftToFollow:"".concat(m)}),isDisabled:!0,allowSkip:!1},skip:{buttonText:c.a._("Skip (pick topics for me)"),isDisabled:!1,allowSkip:!0}};return 0===m?y.done:r?y.skip:y.more})),Rt(jt(jt(n)),"setShortenedRenux",(function(){(0,n.props.setShortenedRenuxModal)(),n.setState({showShortRenux:!0})})),Rt(jt(jt(n)),"handleBottomScroll",(function(e){var t=n.props,r=t.numberToFollow,o=t.selectedInterests,a=t.skipButton,i={nextButtonText:t.nextButtonText,nextButtonTextSingleTopic:t.nextButtonTextSingleTopic,completionNextButtonText:t.completionNextButtonText},s=n.getButtonState(o,r||O.e,a,i,e);n.setState(Nt({},n.state,s))})),Rt(jt(jt(n)),"handleBottomScrollThrottled",Ot()(n.handleBottomScroll,50)),Rt(jt(jt(n)),"handleNextClick",(function(){var e,t=n.props,r=t.customProcessFollowedInterests,o=t.isRenux,a=t.selectedInterests,i=t.followedInterests,s=t.incrementNuxStep,c=t.setNuxPickerProgress,u=t.dispatchUpdateFollows,l=t.dispatchSubmitOrientationContext;if(r)return o||c(O.b),r(),void s();if(o){var d=i.reduce((function(e,t){return e[t.id]=t.is_followed,e}),{});e=Promise.resolve(u(d))}else{var p=[],f=[];a.forEach((function(e){p.push(e.id),f.push(e.log_data?e.log_data:null)}));var m={interests:p.join(),log_data:JSON.stringify(f),referrer:"nux",user_behavior_data:Object(Xe.a)()};e=Promise.resolve(l(m))}e.then((function(){o||c(O.b),Object(x.a)(101,{component:17,element:96,view:n.viewType,viewParameter:172}),s()}))}));var a=e.nextButtonText,s=e.nextButtonTextSingleTopic,u=e.completionNextButtonText,l=e.isRenux,d=e.selectedInterests,p={nextButtonText:a,nextButtonTextSingleTopic:s,completionNextButtonText:u},f=n.getButtonState(d,e.numberToFollow||O.e,e.skipButton,p);return n.state=Nt({},f,{showShortRenux:!1}),n.viewType=l?213:24,n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tt(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatchSetNuxStepProgress,n=e.isRenux,r=e.setNuxPickerProgress;n||r(O.w),t("topic"),Object(x.a)(13,{view:this.viewType,viewParameter:172})}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.numberToFollow,r=t.selectedInterests,o=t.skipButton,a=t.nextButtonText,i=t.nextButtonTextSingleTopic,s=t.completionNextButtonText;if(r.length!==e.selectedInterests.length){var c={nextButtonText:a,nextButtonTextSingleTopic:i,completionNextButtonText:s},u=this.getButtonState(r,n||O.e,o,c);this.setButtonState(u)}}},{key:"setButtonState",value:function(e){this.setState(Nt({},e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.gender,r=t.hideFollowedInterests,a=t.isRenux,i=t.isSimpleRenux,s=t.onSelectedInterestsChange,u=t.personalizationCopy,d=u.addNuxSubheader,p=u.headerText,f=u.subHeaderText,m=t.preselect,h=t.selectedInterests,g=t.showTableOfContents,b=t.numberToFollow,y=this.state,_=y.isDisabled,v=y.buttonText,w=y.showShortRenux;return o.a.createElement(we.a,{name:"web_renux_categorized_topics",isEligible:a&&("male"===n||"female"===n)},(function(t){var u=t.group,y=["enabled_categorized","enabled_limited","employees"].includes(u),S="enabled_categorized"===u||"employees"===u;return o.a.createElement(l.c,{direction:"column",display:"flex",height:"100%"},o.a.createElement(l.c,{display:"visuallyHidden",role:"alert"},Object(kt.b)(c.a._("{{selectedTopicsCount}} of at least 5 topics selected","accessible label how many topics are selected"),{selectedTopicsCount:h.length})),o.a.createElement(l.c,{paddingX:8,marginTop:8,marginBottom:S?3:8,wrap:!0},o.a.createElement(l.m,{size:"xs"},p),(a||d)&&o.a.createElement(l.K,{size:"xl"},f)),o.a.createElement(xt,{categorized:S,gender:n,handleBottomScroll:e.handleBottomScrollThrottled,hideFollowedInterests:r,isRenux:a,isSimpleRenux:i,limited:y,numberToFollow:b,onSelectedInterestsChange:s,preselect:m,selectedInterests:h,setShortenedRenuxContainer:e.setShortenedRenux,showTableOfContents:g}),o.a.createElement(l.c,{position:"relative"},!S&&!w&&Lt,o.a.createElement(l.c,{"data-test-id":"nux-picker-done-btn",marginBottom:8,marginTop:S?3:4,paddingX:8},o.a.createElement(l.d,{size:"lg",color:"red",text:v,disabled:_,onClick:e.handleNextClick,type:"submit"}))))}))}}])&&Pt(n.prototype,r),a&&Pt(n,a),t}(r.Component);Rt(At,"defaultProps",{skipButton:!1,pickButtonTextGenerator:function(e){return c.a.ngettext("Pick {{ numberLeftToFollow }} more","Pick {{ numberLeftToFollow }} more",e,"number of interests left to pick")}});var Ut=Object(a.connect)((function(e){var t=e.viewer;return{gender:t&&t.gender?t.gender:""}}),(function(e){return{dispatchSetNuxStepProgress:function(t){return e(Object(E.a)(t))},dispatchUpdateFollows:function(t){return e(Object(B.e)(t))},dispatchSubmitOrientationContext:function(t){return e(Object(B.b)(t))},setNuxPickerProgress:function(t){return e(Object(B.a)(O.t,t))}}}))(At),Bt=n("ozRy"),Dt=n("V08O");var Gt,Mt={yellow:"#FAB904",orange:"#FF6400",green:"#0FA573",blue:"#0074e8",purple:"#B469EB"},Ft="DelightfulBubbles__",zt=["".concat(Ft,"fadeIn {\n  to {\n    opacity: 1;\n  }\n}\n"),"".concat(Ft,"growShrink {\n  0% {\n    transform: scale(0);\n  }\n  50% {\n    transform: scale(1);\n  }\n  100% {\n    transform: scale(0);\n  }\n}\n"),"".concat(Ft,"swirl {\n  0% {\n    transform: rotate(0deg) translateX(-50%);\n  }\n  100% {\n    transform: rotate(-360deg) translateX(-50%);\n  }\n}\n")].concat(function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(Gt=Object.keys(Mt).map((function(e){var t,n,r,o,a=(t=Object.keys(Mt),n=e,r=t.length,o=t.indexOf(n)+1>=r?0:t.indexOf(n)+1,t[o]);return"".concat(Ft,"colorChange_").concat(e," {\n      0% {\n        background-color: ").concat(Mt[e],";\n      }\n      50% {\n        background-color: ").concat(Mt[a],";\n      }\n    }\n    ")})))||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(Gt)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()),Ht=Object(Dt.a)(zt);function Wt(e){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kt(e){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vt(e,t){return(Vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Jt=function(e){var t=e.delay,n=e.diameter,r=e.height,a=e.initialColor,i=e.width,s=e.xOffset,c=e.yOffset,u=function(e,t,n,r,o,a,i,s){return{bubblePositionStyles:{position:"absolute",marginLeft:"".concat(a/2-o,"px"),marginTop:"".concat(n/2-o,"px"),left:"".concat(i,"px"),top:"".concat(s,"px")},bubbleSwirlStyles:{animation:"".concat(Ft,"swirl 6s ease-in-out ").concat(e,"s infinite forwards"),WebkitAnimation:"".concat(Ft,"swirl 6s ease-in-out ").concat(e,"s infinite forwards")},bubbleGrowShrinkStyles:{transform:"scale(0)",WebkitTransform:"scale(0)",animation:"".concat(Ft,"growShrink 6s ease-in-out ").concat(e,"s infinite alternate"),WebkitAnimation:"".concat(Ft,"growShrink 6s ease-in-out ").concat(e,"s infinite alternate")},bubbleShapeStyles:{height:"".concat(t,"px"),width:"".concat(t,"px"),borderRadius:"50%",backgroundColor:Mt[r],opacity:0,animation:"".concat(Ft,"colorChange_").concat(r," 12s steps(1, start) ").concat(e,"s infinite forwards,\n      ").concat(Ft,"fadeIn 3s linear ").concat(e,"s 1 forwards"),WebkitAnimation:"".concat(Ft,"colorChange_").concat(r," 12s steps(1, start) ").concat(e,"s infinite forwards,\n      ").concat(Ft,"fadeIn 3s linear ").concat(e,"s 1 forwards")}}}(t,n,r,a,Math.floor(n/2),i,s,c);return o.a.createElement(l.c,{dangerouslySetInlineStyle:{__style:u.bubblePositionStyles}},o.a.createElement(l.c,{dangerouslySetInlineStyle:{__style:u.bubbleSwirlStyles}},o.a.createElement(l.c,{dangerouslySetInlineStyle:{__style:u.bubbleGrowShrinkStyles}},o.a.createElement(l.c,{dangerouslySetInlineStyle:{__style:u.bubbleShapeStyles}}))))},Qt=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,n=!(o=(e=Kt(t)).call.apply(e,[this].concat(i)))||"object"!==Wt(o)&&"function"!=typeof o?Yt(r):o,Xt(Yt(Yt(n)),"state",{isInitialized:!1}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vt(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.requestAnimationFrameId=window.requestAnimationFrame((function(){e.setState({isInitialized:!0})}))}},{key:"shouldComponentUpdate",value:function(e,t){return!e.numBubbles===this.props.numBubbles||!t.isInitialized===this.state.isInitialized}},{key:"getSize",value:function(){return void 0!==this.props.width&&void 0!==this.props.height?{height:this.props.height,width:this.props.width}:this.containerElement?{height:this.containerElement.offsetHeight,width:this.containerElement.offsetWidth}:{}}},{key:"createBubbles",value:function(e,t){for(var n=this.props,r=n.bubbleSize,a=n.delayFactor,i=n.delayOffset,s=n.numBubbles,c=n.xRadiusAdjustment,u=e+2*n.yRadiusAdjustment,l=t+2*c,d=[],p=Object.keys(Mt),f=0;f<s;f+=1){var m=r+Object(Dt.c)(-4,4),h=p[f%p.length],g=Object(Dt.b)(u,l),b=g.x,y=g.y;d.push(o.a.createElement(Jt,{delay:f*a+i,diameter:m,initialColor:h,xOffset:b,yOffset:y,height:e,width:t,key:f}))}return d}},{key:"render",value:function(){var e=this,t=this.getSize();return o.a.createElement(l.c,Object.assign({},t,{position:"relative"}),o.a.createElement("style",{dangerouslySetInnerHTML:{__html:Ht}}),o.a.createElement("div",{ref:function(t){return e.containerElement=t}},this.state.isInitialized&&this.createBubbles(t.height||0,t.width||0),o.a.createElement(l.c,{position:"relative"},this.props.children)))}}])&&qt(n.prototype,r),a&&qt(n,a),t}(r.Component);Xt(Qt,"defaultProps",{bubbleSize:16,numBubbles:10,xRadiusAdjustment:0,yRadiusAdjustment:0,delayFactor:1,delayOffset:0});var Zt=Qt,$t=n("BlMG"),en=n("0S8y");function tn(e){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rn(e){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function on(e,t){return(on=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function an(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cn=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return r=this,o=(e=rn(t)).call.apply(e,[this].concat(s)),n=!o||"object"!==tn(o)&&"function"!=typeof o?an(r):o,sn(an(an(n)),"state",{name:n.props.firstName,showAccountSwitchModal:!1,showNameInput:!1,showNoNameError:!1,showNameLengthError:!1}),sn(an(an(n)),"onNameChange",(function(e){var t=e.value;n.setState({name:t||"",showNoNameError:!t||i.h(t),showNameLengthError:!!t&&t.length>30})})),sn(an(an(n)),"toggleNameInput",(function(){n.setState((function(e){var t=e.showNameLengthError,n=e.showNoNameError,r=e.showNameInput;return{showNameInput:t||n||!r}})),Object(x.a)(101,{element:136,view:24,viewParameter:259})})),sn(an(an(n)),"continueAndSave",(function(){var e=n.props,t=e.incrementNuxStep,r=e.setNuxNameProgress,o=e.updateNameInfo,a=n.state.name;o(Object(en.a)(a)).then((function(){r(),Object(x.a)(101,{element:96,view:24,viewParameter:259}),t()}))})),sn(an(an(n)),"getError",(function(){var e=n.state,t=e.showNameLengthError,r="";return e.showNoNameError?r=c.a._("And your name is...?","Error flyout when user doesn't input name"):t&&(r=c.a._("Hmm, that's a few characters too long. Try a nickname instead?","Name exceeds 30 character maximum error")),r})),sn(an(an(n)),"handleHideAccountSwitcher",(function(){return n.setState({showAccountSwitchModal:!1})})),sn(an(an(n)),"handleNotYouClick",(function(e){e.event.preventDefault(),Object($t.a)("web.nux.click_login"),n.setState({showAccountSwitchModal:!0})})),n}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&on(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){this.props.dispatchSetNuxStepProgress("welcome"),Object(x.a)(13,{view:24,viewParameter:259})}},{key:"render",value:function(){var e=this.props,t=e.personalizationCopy,n=t.headerText,a=t.subHeaderText,s=e.userEmail,u=this.state,d=u.name,p=u.showAccountSwitchModal,f=u.showNameInput,m=i.c(c.a._("{{ titleText }}, {{ name }}!","Greeting with inferred name."),{titleText:n,name:d}),h=n,g=c.a._("Already have a Pinterest account?","subtitle to ask users who create a new account if they meant to log in to an existing account"),b=this.getError(),y=o.a.createElement(l.c,{"data-test-id":"nux-edit-name-btn",marginStart:1},o.a.createElement(l.o,{accessibilityLabel:"editName",bgColor:"transparent",icon:f?"check":"edit",onClick:this.toggleNameInput,size:"sm"}));return o.a.createElement(r.Fragment,null,p&&o.a.createElement(Bt.a,{onDismiss:this.handleHideAccountSwitcher,showAddAccount:!0,hideAccountSwitchValueProp:!0,customTaglineText:c.a._("Log in","Title on modal for users to log in to an existing account after they accidentally created a new account")}),o.a.createElement(l.c,{direction:"column",display:"flex",height:"100%",padding:10,minWidth:"100%"},o.a.createElement(l.c,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"around",marginBottom:10,width:"100%"},o.a.createElement(Zt,{delayOffset:-5,xRadiusAdjustment:40},o.a.createElement(l.c,{alignItems:"center",color:"lightWash",direction:"column",display:"flex",height:100,justifyContent:"end",overflow:"hidden",shape:"circle",width:100},o.a.createElement(l.n,{accessibilityLabel:c.a._("Loading state for any sign up registration"),color:"gray",icon:"person",size:70}))),o.a.createElement(l.c,{alignItems:"center",marginTop:5},o.a.createElement(l.K,{align:"center",size:"lg",truncate:!0},s)),o.a.createElement(l.c,{alignItems:"end",display:"flex",width:"100%"},o.a.createElement(l.c,{dangerouslySetInlineStyle:{__style:{textAlign:"center"}},direction:"column",display:"flex",marginStart:9,maxHeight:170,overflow:"hidden",width:"100%"},o.a.createElement(l.q,{htmlFor:"name"},o.a.createElement(l.m,{size:"sm"},f?h:m)),f&&o.a.createElement(l.c,{alignItems:"center","data-test-id":"nux-edit-name-input",display:"flex",justifyContent:"center",padding:1},o.a.createElement(l.c,{width:250},o.a.createElement(l.M,{id:"name",errorMessage:b,onChange:this.onNameChange,placeholder:c.a._("name"),type:"text",value:d})),y)),!f&&y),o.a.createElement(l.c,{width:"100%"},o.a.createElement(l.K,{align:"center",size:"xl"},a))),o.a.createElement(l.c,{"data-test-id":"nux_name_done_btn"},o.a.createElement(l.d,{accessibilityLabel:c.a._("Next","go to next nux step"),color:"red",disabled:!!b,onClick:this.continueAndSave,text:c.a._("Next","next nux step button"),type:"button"})),o.a.createElement(l.c,{marginTop:4},o.a.createElement(l.P,{onTouch:this.handleNotYouClick,fullWidth:!1},o.a.createElement(l.K,{size:"lg",align:"center"},g),o.a.createElement(l.K,{size:"lg",align:"center",bold:!0},o.a.createElement(l.t,{href:"#"},c.a._("Log in instead","Link allowing users who just created a new account the option to log in instead into an existing account")))))))}}])&&nn(n.prototype,a),s&&nn(n,s),t}(r.PureComponent),un=Object(a.connect)((function(e){var t=e.viewer;return{firstName:t.firstName?t.firstName:"",userEmail:t.isAuth?t.email:""}}),(function(e){return{dispatchSetNuxStepProgress:function(t){return e(Object(E.a)(t))},updateNameInfo:function(t){return e(Object(B.f)({updateUserData:t}))},setNuxNameProgress:function(){return e(Object(B.a)(O.u,O.b))}}}))(cn),ln=[{moduleName:"NuxPicker"},{moduleName:"NuxExtensionUpsell"},{moduleName:"NuxEducationLoader"}];function dn(e){return(dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fn(e){return(fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mn(e,t){return(mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var gn=n("dtw8");function bn(e){return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){En(e,t,n[t])}))}return e}function _n(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wn(e){return(wn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sn(e,t){return(Sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function En(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var On=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=wn(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==bn(o)&&"function"!=typeof o?xn(r):o,En(xn(xn(n)),"state",{followedInterests:[],isLoading:!1,nuxStep:n.getNextStepIndex(-1,n.props.steps,!1),selectedInterests:[],userClickedBack:!1,showShortRenuxModal:!1}),En(xn(xn(n)),"onComplete",(function(){var e=n.props,t=e.handleComplete,r=e.isLandingPage,o=e.isRenux,a=e.dispatchUpdateFirstHomeFeedRequestAfterNuxFlag;Object(x.a)(4105,{view:o?213:24,viewParameter:171}),o||a(!0),t(),r&&n.handleNavigate("/")})),En(xn(xn(n)),"mounted",!1),En(xn(xn(n)),"handleNavigate",(function(e){var t=n.props.router;if(t)t.push({pathname:e,state:{completedNux:!0}});else{var r=new u.a;_e.a.instance.navigate(e,r)}})),En(xn(xn(n)),"handleSelectedInterestsChange",(function(e,t){n.setState((function(r,o){var a=n.getUpdatedSelectedInterests(r.selectedInterests,e,t),i=n.getUpdatedFollowInterests(r.followedInterests,e,t);return(0,o.dispatchSetNuxSelectedInterestImages)(a.reduce((function(e,t){if(t&&t.images&&t.images["400x"]){var n={bestPinsImages:t.best_pins_images,height:t.images["400x"].height,width:t.images["400x"].width,url:t.images["400x"].url};e.push(n)}return e}),[])),{selectedInterests:a,followedInterests:i}}))})),En(xn(xn(n)),"nuxSteps",{NuxGenderStep:ne,NuxLocaleCountryStep:Pe,NuxPicker:Ut,NuxExtensionUpsell:q,NuxEducationLoader:L,NuxWelcomeNameStep:un}),En(xn(xn(n)),"setShortenedRenuxModal",(function(){return n.setState({showShortRenuxModal:!0})})),En(xn(xn(n)),"onPrevStepClickFn",(function(e){var t=n.props,r=t.steps,o=t.isRenux,a=r[e].moduleName;return function(){var t={NuxWelcomeNameStep:259,NuxGenderStep:3120,NuxLocaleCountryStep:3139,NuxPicker:172}[a];t&&Object(x.a)(101,{component:17,element:34,view:o?213:24,viewParameter:t}),e>0&&n.setState({nuxStep:e-1,userClickedBack:!0})}})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sn(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props.isRenux;this.mounted=!0,Object(x.a)(4104,{view:e?213:24,viewParameter:170})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"getUpdatedFollowInterests",value:function(e,t,n){var r=_n(e);return t.forEach((function(e){var t=yn({},e,{is_followed:n}),o=!1;r=r.map((function(e){return e.id===t.id?(o=!0,t):e})),o||r.push(t)})),r}},{key:"getUpdatedSelectedInterests",value:function(e,t,n){var r=_n(e);return t.forEach((function(t){var o=Object(s.b)(r,t);n&&!o?r.push(yn({},t,{is_followed:n})):!n&&o&&(r=e.filter((function(e){return e.id!==t.id})))})),r}},{key:"getPersonalizationCopy",value:function(e){var t,n,r=this.props,o=r.hideFollowedInterests,a=r.isRenux,s=r.isSimpleRenux,u=r.requestContext,l=r.steps,d=e.moduleName,p=l.map((function(e){return e.moduleName})).indexOf(d)===l.length-2;switch(d){case"NuxWelcomeNameStep":return{headerText:c.a._("Welcome to Pinterest","greeting on welcome name step"),subHeaderText:c.a._("Your answers to the next few questions will help us find the right ideas for you","header on nux welcome and name editing step")};case"NuxGenderStep":return t=c.a._("How do you identify?","Header in NUX gender step."),n="",a&&(t=c.a._("It’s time to refresh your feed!","Title on the modal asking user's gender"),n=c.a._("How would you describe yourself?","Subtitle on the modal asking user's gender")),{headerText:t,subHeaderText:n};case"NuxLocaleCountryStep":return new K.c(u,"web_nux_us_location_upsell").enabledWithNoActivation()?{headerText:c.a._("Share your location to find ideas where you are","Experiment header in NUX locale/country step")}:{headerText:c.a._("Pick your language and country/region","Header in NUX locale/country step")};case"NuxPicker":a&&o?(t=c.a._("What are you into these days?","Header in ReNUX topic picker step."),n=c.a._("Pick the topics you want to see in your home feed","Subheader in ReNUX topic picker step.")):(t=p?c.a._("Last step! Tell us what you're interested in","Header in NUX topic picker step."):c.a._("Tell us what you're interested in","Header in NUX topic picker step."),n=i.c(c.a._("Pick {{ numberToFollow }} (or more!) to start discovering new ideas","Subheader in NUX topic picker step with required number of topics to follow"),{numberToFollow:String(O.e)}));var f=new K.b(u,"web_nux_picker_explore_change_header"),m=!1;return a||s||(f.check("enabled_explore")?t=c.a._("Last step! Tell us what ideas you want to explore","Nux topic picker header emphasizing exploration"):f.check("enabled_change")&&(t=c.a._("Last step! Tell us what ideas you want to explore","Nux topic picker header emphasizing exploration and ability to change topics later"),n=c.a._("You can change these later","Nux topic picker subheader explaining ability to change topics later"),m=!0)),{headerText:t,subHeaderText:n,addNuxSubheader:m};case"NuxExtensionUpsell":return{headerText:t=p?c.a._("Last step! Get our handy browser button","Header in NUX browser extension upsell step."):c.a._("Get our handy browser button","Header in NUX browser extension upsell step."),subHeaderText:c.a._("Quickly save any idea you find around the web","Subheader in NUX browser extension upsell step")};default:return{}}}},{key:"nuxStepToRender",value:function(e,t){var n=this,r=this.state,a=r.followedInterests,i=r.selectedInterests,s=this.props,c=s.hideFollowedInterests,u=s.isRenux,l=s.isSimpleRenux,d=s.requestContext,p=e.moduleName,f=this.nuxSteps[p],m=this.hasNuxStep("NuxGenderStep");return o.a.createElement(f,Object.assign({},e.options,{experiments:d.experiments,followedInterests:a,hasGenderStep:m,hideFollowedInterests:c,incrementNuxStep:this.incrementNuxStep(this.state.nuxStep),isSimpleRenux:l,isRenux:u,numberToFollow:u&&c?O.v:O.e,onSelectedInterestsChange:this.handleSelectedInterestsChange,personalizationCopy:this.getPersonalizationCopy(e),requestContext:d,selectedInterests:i,showTableOfContents:t,toggleLoadingIndicator:function(e){return n.setState({isLoading:e})},setShortenedRenuxModal:this.setShortenedRenuxModal}))}},{key:"getNextStepIndex",value:function(e,t,n){var r=this.props.isRenux,o=e+1;if(n)return o;if(!r)for(;o<t.length&&t[o].isCompleted;)o+=1;return o}},{key:"incrementNuxStep",value:function(e){var t=this,n=this.props,r=n.steps,o=n.dispatchSubmitOrientationContextFollow,a=this.state.userClickedBack,i=this.getNextStepIndex(e,r,a);return i>=r.length?this.onComplete:function(){var n=function(n){if(e!==n)return t.setState({nuxStep:n})};r.length>i&&r[i].options&&r[i].options.onStartApi&&r[i].options.onStartApi===O.h?o().finally(n):n(i)}}},{key:"hasNuxStep",value:function(e){return this.props.steps.some((function(t){return t.moduleName===e}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.nuxStep,r=e.showShortRenuxModal,a=this.props,i=a.handleDismiss,s=a.isLandingPage,c=a.isPartner,u=a.isRenux,l=a.isSimpleRenux,d=a.requestContext,p=a.steps,f=function(e){return["NuxEducationLoader"].includes(e)},m=p.filter((function(e){return!f(e.moduleName)})),h=!f(p[n].moduleName)&&!s&&!u,g=h&&m.length>1&&!c,b=h&&!g,y=!(!u||f(p[n].moduleName));return o.a.createElement(Ye,{displayHide:y,isLoading:t,isRenux:u,isSimpleRenux:l,nuxStep:p[n],onHide:i,onPrevStepClick:this.onPrevStepClickFn(n),requestContext:d,showCounter:b,showShortRenuxPicker:r,showTableContents:g,steps:m},this.nuxStepToRender(p[n],g))}}])&&vn(n.prototype,r),a&&vn(n,a),t}(r.Component);En(On,"defaultProps",{hideFollowedInterests:!1,isRenux:!1,isSimpleRenux:!1});t.a=Object(k.compose)(V.f,Object(a.connect)((function(e){var t=e.viewer;return{isPartner:t.isAuth&&t.isPartner}}),(function(e){return{dispatchSetNuxSelectedInterestImages:function(t){return e(function(e){return{type:"SET_NUX_SELECTED_INTEREST_IMAGES",payload:{images:e}}}(t))},dispatchSubmitOrientationContextFollow:function(){return e(Object(B.c)())},dispatchUpdateFirstHomeFeedRequestAfterNuxFlag:function(t){return e(Object(B.d)(t))}}})),S.a,(function(e){return function(t){function n(){var e,t,r,o,a,i,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var c=arguments.length,u=new Array(c),l=0;l<c;l++)u[l]=arguments[l];return r=this,t=!(o=(e=fn(n)).call.apply(e,[this].concat(u)))||"object"!==dn(o)&&"function"!=typeof o?hn(r):o,a=hn(hn(t)),s={skipExtStep:!1},(i="state")in a?Object.defineProperty(a,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[i]=s,t}var r,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mn(e,t)}(n,t),r=n,(a=[{key:"componentDidMount",value:function(){var e=this,t=this.props.steps;A.a.extensionReady(O.n).then((function(n){t.some((function(e){return"NuxExtensionUpsell"===e.moduleName}))&&n&&e.setState({skipExtStep:!0})}))}},{key:"render",value:function(){var t=this.props.steps;return this.state.skipExtStep&&(t=t.filter((function(e){return"NuxExtensionUpsell"!==e.moduleName}))),o.a.createElement(e,Object.assign({},this.props,{steps:t}))}}])&&pn(r.prototype,a),i&&pn(r,i),n}(r.PureComponent)}),(function(e){return function(t,n){return o.a.createElement(e,Object.assign({},t,{steps:t.steps||ln}))}}),gn.withRouter)(On)},SPMB:function(e,t,n){},UPfj:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"i",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"h",(function(){return f})),n.d(t,"b",(function(){return m}));var r=n("gxu6"),o=n("pDoi"),a=n("oZBM");function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";arguments.length>3&&arguments[3],arguments.length>4&&arguments[4];return t?a.a.tier1:n&&n.includes("yahoo.co.jp")&&"JP"===e?a.a.tier1:e?(e=e||"",a.g.has(e)?a.a.tier1:a.i.has(e)?a.a.tier2:a.a.tier3):a.a.tier1}function s(){r.b("hasBeenShownLoginModalInOpen","true",a.e)}function c(e){o.b.sessionStorage.setItem("uimb",!!e)}function u(){return o.b.sessionStorage.getItem("uimb")||!1}function l(e){return void 0!==e&&o.b.sessionStorage.setItem("mdfu",e),o.b.sessionStorage.getItem("mdfu")||0}function d(e){o.b.localStorage.setItem("uoiou",!!e)}function p(){return o.b.localStorage.getItem("uoiou")||!1}function f(){o.b.sessionStorage.setItem(a.d,a.c)}function m(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return p()||o.b.sessionStorage.getItem(a.d)===a.c||!e&&u()}},VL22:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return l}));var r=n("17x9"),o=n.n(r),a=n("kmwA"),i={FACEBOOK:"facebook",GOOGLE_ONE_TAP:"google_one_tap",GOOGLE:"google",EMAIL:"email",OTHER:"other"},s=function(e){return e.facebook_id?i.FACEBOOK:e.google_open_id_token?i.GOOGLE_ONE_TAP:e.gplus_code||e.gplus_id_token?i.GOOGLE:e.email?i.EMAIL:i.OTHER},c=(o.a.shape({credentials:o.a.shape({}),userData:o.a.shape({}),type:o.a.oneOf(Object.values(i))}),function(e){return e in a.a.settings.MINIMUM_AGE_BY_EU_COUNTRY}),u=function(e){return a.a.settings.EN_COUNTRIES_WITH_MANDATORY_AGE.includes(e)},l=function(e){return a.a.settings.AGE_COLLECTION_MARKETS.has(e)}},dg5e:function(e,t,n){"use strict";n.r(t);n("bZMm");var r=n("xAAE"),o=n("JW66"),a=n("+NLT"),i=n("7LcF"),s=n("s4NR"),c=n.n(s),u=n("eOdZ"),l=n("kmwA"),d=n("BlMG"),p=n("zwad"),f=i.a.getLogger("AuthHandshake"),m={_parseJson:function(e){return e.json()},_throwError:function(e){var t=new Error(e.statusText);throw t.response=e,m._reconstructError(t),t},_checkStatus:function(e){return 200===e.status||401===e.status?e:(m._throwError(e),{})},_crossDomainRequest:function(e,t,n){if("GET"!==n&&"POST"!==n)return Promise.resolve({});var r={credentials:"include",mode:"cors"};return"POST"===n&&(r.method="POST",r.body=t,r.headers={"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","X-Pinterest-InstallId":a.a.instance.unauth_id},a.a.instance.unauth_id||Object(d.a)("unauth.auth_handshake.cross_domain.no_unauth_id.".concat(n))),fetch(e,r).then(m._checkStatus).then(m._parseJson).then((function(e){return"success"===e.status?Promise.resolve(e):e.code===o.a.LOGIN_MFA_REQUIRED?(e.api_error_code=e.code,Promise.reject(e)):(m._throwError(e),{})})).catch((function(e){throw e}))},_reconstructError:function(e){!e.api_error_code&&e.response&&(e.api_error_code=e.response.code,e.message=e.response.message)},_shouldRedirectToCanonical:function(){var e=l.a.settings.ACCOUNTS_PINTEREST_URL+"/v3/handshake/sos_canonical/";return fetch(e,{credentials:"include",mode:"cors"})},_redirectToCanonical:function(){var e="";if(window.location.search){var t=c.a.parse(window.location.search.substring(1));t.originalUrl&&(e=t.originalUrl)}e||(e=window.location.pathname+window.location.search),e.startsWith("/")||(e="/".concat(e));var n=l.a.settings.CANONICAL_MAIN_URL;Object(r.a)("".concat(n).concat(e))},verifyAndRedirectToCanonical:function(){return m._shouldRedirectToCanonical().then((function(e){e.json().then((function(e){e&&e.data&&m._redirectToCanonical()}))}))},_verifyAndGetToken:function(){var e=l.a.settings.ACCOUNTS_PINTEREST_URL+"/v3/handshake/verify/";return m._crossDomainRequest(e,"","GET")},exchangeTokenAndSetSession:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=u.a.create("HandshakeSessionResource",{token:e,isRegistration:t});return n.callCreate()},verifyLoggedInStatus:function(){m._verifyAndGetToken().then((function(e){if(e&&e.data){var t=e.data;m.exchangeTokenAndSetSession(t).then((function(e){window.location.reload()}),(function(e){f.error("Failed to set session for current user; "+e.message)}))}else f.error("No custom access token in cross domain verify response")}),(function(e){}))},_setUpRegisterParameters:function(e){var t={};if(t.email=e.email||"",t.username=e.username||"",t.password=e.password||"",t.first_name=e.first_name||"",t.last_name=e.last_name||"",t.country=e.country||"",t.locale=a.a.instance.locale,t.referrer=a.a.instance.referrer,e.age){var n=new Date;n.setFullYear(n.getFullYear()-e.age);var r=parseInt(n/1e3,10);t.birthday=r.toString()}if(e.custom_gender&&(t.custom_gender=e.custom_gender),e.gender&&(t.gender=e.gender),e.business_name&&(t.account_type=e.account_type,t.business_name=e.business_name,t.first_name=e.business_name),a.a.instance.invite_code&&(t.invite_code=a.a.instance.invite_code),e.facebook_id){var o=a.a.instance.facebook_token||e.facebook_token||"";o||f.debug("Facebook token is not being set during login call."),t.facebook_id=e.facebook_id,t.facebook_token=o,t.social_username=e.social_username||""}else(e.gplus_code||e.gplus_id_token)&&(t.password=e.password||"",t.one_time_code=e.gplus_code,t.id_token=e.gplus_id_token,t.redirect_uri=e.gplus_redirect_uri);return p.a.getQueryStringFromObject(t)},_setUpLoginParameters:function(e){var t={};if(e.username_or_email&&(t.username_or_email=e.username_or_email.trim(),t.password=e.password,t.referrer=a.a.instance.referrer),e.facebook_id){var n=a.a.instance.facebook_token||e.facebook_token||"";n||f.debug("Facebook token is not being set during login call."),t.facebook_id=e.facebook_id,t.facebook_token=n,t.facebook_autologin=e.facebook_autologin||!1}return e.gplus_id_token&&(t.gplus_id_token=e.gplus_id_token,t.gplus_access_token=e.gplus_access_token,t.gplus_expires_at=e.gplus_expires_at,t.gplus_autologin=e.gplus_autologin||!1),e.mfa_token&&(t.mfa_token=e.mfa_token),p.a.getQueryStringFromObject(t)},_getRegisterRequestUrl:function(e){var t="/v3/register/email/handshake/";return e.facebook_id&&(t="/v3/register/facebook/handshake/"),(e.gplus_code||e.gplus_id_token)&&(t="/v3/register/gplus/handshake/"),e.business_name&&(t="/v3/register/partner/handshake/"),l.a.settings.ACCOUNTS_PINTEREST_URL+t},_getLoginRequestUrl:function(e){var t="/v3/login/handshake/";return e.facebook_id&&(t="/v3/login/facebook/handshake/"),e.gplus_id_token&&(t="/v3/login/gplus/handshake/"),e.mfa_token&&(t="/v3/login/mfa/handshake/"),l.a.settings.ACCOUNTS_PINTEREST_URL+t},registerUser:function(e){var t=m._getRegisterRequestUrl(e),n=m._setUpRegisterParameters(e);return m._crossDomainRequest(t,n,"POST")},loginUser:function(e){var t=m._getLoginRequestUrl(e),n=m._setUpLoginParameters(e);return m._crossDomainRequest(t,n,"POST")}};t.default=m},iFas:function(e,t,n){"use strict";t.a={ACCOUNT_SWITCHER_FLYOUT:"account_switcher_flyout",ACCOUNT_SWITCHER_MODAL:"account_switcher_modal",ACCOUNT_RECOVERY:"account_recovery",BOARD_INVITE:"board_invite",CLOSEUP:"closeup",CLOSEUP_BANNER:"closeup_banner",FOLLOW_BUTTON:"followbtn",FLASHLIGHT_GRID:"flashlight_grid",GOOGLE_ONE_TAP:"google_one_tap_modal",LOGIN_PAGE:"login_page",INSPIRED_BANNER:"inspired_banner",MFA_LOGIN_PAGE:"mfa_login_page",HYBRID_CLICKTHROUGH:"hybrid_clickthrough",HYBRID_BANNER:"hybrid_banner",PIN_GRID:"pin_grid",PIN_IMAGE:"pin_image",RESPONSE_FLYOUT:"response_flyout",UNAUTH_BANNER:"unauth_banner",UNAUTH_HEADER:"unauth_header"}},kw3W:function(e,t,n){"use strict";var r=n("q1tI"),o=n.n(r),a=n("n6mq"),i=function(e){if(e.viewerId===e.account.id)return null;var t=e.account.imageMediumUrl&&!e.account.imageMediumUrl.includes("static/images/user/default");return o.a.createElement(a.c,{alignItems:"center",direction:"row",display:"flex",height:"100%",width:"100%"},o.a.createElement(a.c,{paddingX:1},o.a.createElement(a.a,{name:e.account.fullName||e.account.username,src:t?e.account.imageMediumUrl:"",size:e.large?"lg":"md"})),o.a.createElement(a.c,{marginLeft:3,flex:"grow"},o.a.createElement(a.K,{bold:!0,color:"darkGray",size:"md",truncate:!0},e.account.fullName||e.account.username),e.account.email&&o.a.createElement(a.K,{color:"darkGray",size:"md",truncate:!0},e.account.email)))},s=n("0Bqi"),c=function(e){var t=Object.keys(e.accounts).length;return o.a.createElement(a.c,{position:"relative"},o.a.createElement(a.c,{color:"lightGray",height:20*t*4,position:"absolute",width:1,dangerouslySetInlineStyle:{__style:{bottom:48,left:52}}}),o.a.createElement("ul",null,Object.keys(e.accounts).map((function(t){var n=e.accounts[t];return o.a.createElement("li",{key:t},o.a.createElement(a.P,{onTouch:function(){return e.onClick(n)}},o.a.createElement("div",{className:"AccountSwitcherListItem",style:{padding:"8px 16px 8px 28px"}},o.a.createElement(i,{account:n}))))}))))},u=n("iFas"),l=n("h4v/"),d=n("Ye/N"),p=n("shJ5"),f=n("x/Ro"),m=n("3gA6"),h=n("eOdZ"),g=n("kmwA"),b=n("NdXn"),y=n("fArA"),_=n("gC5q"),v=n("XCz/"),w=n("/5zs"),S=n("NtFK"),x=n("U4JR"),E=n("zLLH"),O=n("liz/"),k=n("pLLR");function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e){function t(){var e,n,r,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,p=new Array(c),y=0;y<c;y++)p[y]=arguments[y];return r=this,s=(e=P(t)).call.apply(e,[this].concat(p)),n=!s||"object"!==C(s)&&"function"!=typeof s?T(r):s,j(T(T(n)),"state",{failedAccount:null,showLoginModal:!1,isLoading:!1}),j(T(T(n)),"handleAddAccount",(function(){Object(O.k)("add_account_click",null,n.props.container),n.props.container===u.a.ACCOUNT_SWITCHER_MODAL&&n.props.showLogin?n.props.showLogin():n.setState({showLoginModal:!0})})),j(T(T(n)),"trackProfileNavigateClick",(function(e){Object(S.g)(14),Object(O.k)("current_profile_".concat(e,"_click"),null,n.props.container)})),j(T(T(n)),"handleSwitch",(function(e){var t=n.props,r=t.container,o=t.requestContext,a=e.partner&&e.partner.is_create;n.setState({isLoading:!0}),Object(x.a)(101,{component:13369,element:11196}),Object(O.k)("switch_account_click",{destination_user_id:e.id},r);var i={get_user:!0,switch_account:e.id};l.a.getInstance().pauseImpressionsAndFlush(),Object(f.a)(i,{container:"account_switcher"},null,!0).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.resource_response&&t.resource_response.data&&t.resource_response.data.success){var i=new w.b(o,"web_pro_mode_header"),s=i.check("enabled_full_width")||i.check("enabled_full_width_employees"),c=a?"/":"/".concat(e.username);s&&(c="".concat(g.a.settings.CANONICAL_MAIN_URL,"/").concat(e.username,"/"),a&&(c=g.a.settings.CANONICAL_MAIN_URL)),Object(O.g)(c,e.id,r)}else Object(O.f)(e.id,r),n.setState({failedAccount:e,isLoading:!1})}),(function(t){throw Object(O.f)(e.id,r),n.setState({isLoading:!1}),t}))})),j(T(T(n)),"handleLinkedAccountSwitch",(function(e){var t=n.props,r=t.container,o=t.viewer;if(n.setState({isLoading:!0}),Object(x.a)(101,{component:13369,element:e.partner&&e.partner.isLinkedBusiness?11195:11194}),l.a.getInstance().pauseImpressionsAndFlush(),e.partner&&e.partner.isLinkedBusiness){var a={business_id:e.id,get_user:!0};Object(f.a)(a,{container:"account_switcher"},null,!0).then((function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(O.g)("/",e.id,r)}),(function(t){throw Object(O.f)(e.id,r),n.setState({isLoading:!1}),t}))}else h.a.create("UserSessionResource",{disable_auth_failure_redirect:!0}).callDelete().then((function(){Object(O.j)(o.id),Object(O.g)("/".concat(e.username),o.id,r)}),(function(e){throw Object(O.f)(o.id,r),n.setState({isLoading:!1}),e}))})),j(T(T(n)),"handleCloseModal",(function(){return n.setState({showLoginModal:!1})})),j(T(T(n)),"handleReauthAccount",(function(){Object(O.k)("switch_failure_prompt.login_click",null,n.props.container),n.setState({failedAccount:null,showLoginModal:!0})})),j(T(T(n)),"handleRemoveUnauthAccount",(function(e){Object(O.k)("switch_failure_prompt.account_removed",{removed_user_id:e},n.props.container),Object(O.j)(e),n.setState({failedAccount:null})})),j(T(T(n)),"getBusinessAccounts",(function(){var e=n.props,t=e.businessUser,r=e.viewer.partner;return t.data?(r&&r.is_linked_business?t.data.owners:t.data.businesses).reduce((function(e,t){return e[t.id]=Object(_.a)(b.a,!0)(t),t.partner&&t.partner.is_linked_business&&(e[t.id].email=t.partner.biz_ownership_email),e}),{}):null})),j(T(T(n)),"renderAccounts",(function(e){return Object.keys(e).map((function(t,r){return o.a.createElement("li",{key:r},o.a.createElement(a.P,{onTouch:function(){n.handleSwitch(e[t])}},o.a.createElement("div",{className:"AccountSwitcherListItem",style:{height:"auto"}},o.a.createElement(i,{large:!0,account:e[t],viewerId:n.props.viewer.id}))),r!==O.a-2&&o.a.createElement(a.j,null))}))})),j(T(T(n)),"renderPinnerButtons",(function(e){var t=n.props.onNavigateButtonClick;return o.a.createElement(m.b,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:"/".concat(e,"/")},o.a.createElement(a.d,{text:d.a._("View profile","Visit a user profile from account switcher"),accessibilityLabel:d.a._("Go to current profile","Visit a current user profile from account switcher"),size:"sm",color:"red",onClick:function(){n.trackProfileNavigateClick("button"),t&&t()}}))})),j(T(T(n)),"renderBusinessButtons",(function(e){var t=n.props,r=t.onNavigateButtonClick,i=t.enterProMode,s=t.viewer.partner;return o.a.createElement(a.c,{display:"flex"},o.a.createElement(a.c,{marginEnd:2},o.a.createElement(v.a,{activate:!1,name:"web_pro_mode_header"},(function(e){var t=e.group.startsWith("enabled_full_width");return o.a.createElement(m.b,{to:t&&s&&!s.is_convert?"/":"/business/hub/",onClick:function(){Object(x.a)(101,{element:11236}),i&&i(),r&&r()}},o.a.createElement(a.d,{key:"biz-hub-button",text:d.a._("Business hub","Link to Business hub from account switcher"),accessibilityLabel:d.a._("Go to Business hub","Visit the Business hub for the current business user"),size:"sm",color:"red"}))}))),o.a.createElement(v.a,{activate:!1,name:"web_pro_mode_header"},(function(t){var i=t.group.startsWith("enabled_full_width");return o.a.createElement(m.b,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:i?"".concat(g.a.settings.CANONICAL_MAIN_URL,"/").concat(e,"/"):"/".concat(e,"/")},o.a.createElement(a.d,{text:d.a._("Profile","Visit a user profile from account switcher"),accessibilityLabel:d.a._("Go to current user profile","Visit a current user profile from account switcher"),size:"sm",onClick:function(){n.trackProfileNavigateClick("button"),r&&r()}}))})))})),n}var n,r,y;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.props.container===u.a.ACCOUNT_SWITCHER_MODAL&&Object(O.k)("modal.shown")}},{key:"componentWillUnmount",value:function(){this.props.container===u.a.ACCOUNT_SWITCHER_MODAL&&Object(O.k)("modal.dismiss")}},{key:"renderLoadingIndicator",value:function(){return this.state.isLoading?o.a.createElement(p.a,null):null}},{key:"render",value:function(){var e=this,t=this.props.viewer.partner,n=this.state,r=n.failedAccount,u=n.isLoading,l=n.showLoginModal,p=Object(O.e)(),f=this.getBusinessAccounts(),h=Object.keys(p).length,g=p[this.props.viewer.id];delete p[g.id];var b=g.imageLargeUrl&&!g.imageLargeUrl.includes("static/images/user/default");return o.a.createElement(a.c,{flex:"grow"},l&&o.a.createElement(s.a,{container:this.props.container,onClose:this.handleCloseModal,email:r?r.email:""}),r?o.a.createElement(a.c,{paddingX:4,paddingY:4,flex:"grow"},o.a.createElement(a.c,{marginBottom:3},o.a.createElement(a.K,null,d.a._("Oh no! You're no longer logged into","Full sentence: \"Oh no! You're no longer logged into <user's account>\". Text telling user that they are no longer logged into an account after trying to switch to it"))),o.a.createElement(i,{viewerId:g.id,account:r}),o.a.createElement(a.c,{marginTop:4},o.a.createElement(a.d,{text:d.a._("Log in again","Text on button allowing user to log into an account after failing to switch to that account"),color:"red",onClick:this.handleReauthAccount})),o.a.createElement(a.c,{marginTop:3},o.a.createElement(a.d,{text:d.a._("Remove account","Text on button allowing user to remove an account from their account switcher after failing to switch to it"),onClick:function(){return e.handleRemoveUnauthAccount(r.id)}}))):o.a.createElement(a.c,null,u&&this.renderLoadingIndicator(),o.a.createElement(a.c,null,o.a.createElement(a.c,{alignItems:"center",direction:"row",display:"flex",marginTop:1,padding:4,position:"relative",dangerouslySetInlineStyle:{__style:{zIndex:1}}},o.a.createElement(a.c,{marginRight:4},o.a.createElement(m.b,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:"/".concat(g.username,"/")},o.a.createElement(a.P,{onTouch:function(){return e.trackProfileNavigateClick("avatar")}},o.a.createElement(a.a,{name:g.fullName||g.username,size:"lg",src:b?g.imageLargeUrl:""})))),o.a.createElement(a.c,{flex:"grow"},o.a.createElement(a.c,{marginBottom:2},o.a.createElement(a.K,{bold:!0,color:"darkGray",size:"md",truncate:!0},g.fullName||g.username),g.email&&o.a.createElement(a.K,{color:"darkGray",size:"md",truncate:!0},g.email)),t?this.renderBusinessButtons(g.username):this.renderPinnerButtons(g.username))),f?o.a.createElement(c,{accounts:f,onClick:this.handleLinkedAccountSwitch}):null,o.a.createElement(a.j,null),t&&t.is_linked_business?null:o.a.createElement(a.c,null,o.a.createElement("ul",null,this.renderAccounts(p)))),h<O.a&&!(t&&t.is_linked_business)&&o.a.createElement(a.c,{paddingX:4,paddingY:3},o.a.createElement(a.d,{text:d.a._("Add account","Short text on the button that allows a user to log in to another Pinterest account"),onClick:function(){return e.handleAddAccount()}}))))}}])&&N(n.prototype,r),y&&N(n,y),t}(r.Component);t.a=Object(y.compose)(k.f,Object(E.b)({key:"businessUser",name:"UserResource",options:function(e){return{field_set_key:"linked_partner",user_id:e.viewer.id}}}))(R)},"liz/":function(e,t,n){"use strict";var r=n("xAAE"),o=n("JW66"),a=n("iFas"),i=function(e){return"undefined"!=typeof window?window.localStorage.getItem(e):null},s=function(e,t){"undefined"!=typeof window&&window.localStorage.setItem(e,t)},c={getAccounts:function(){return i(o.a.MULTIPLE_ACCOUNTS)},getAccountsJSON:function(){return c.getAccounts()?JSON.parse(c.getAccounts()):{}},getGroupId:function(){var e=i(o.a.MULTIPLE_ACCOUNTS_GROUP);return e?JSON.parse(e):null},setAccounts:function(e){return s(o.a.MULTIPLE_ACCOUNTS,e)},setGroupId:function(e){return s(o.a.MULTIPLE_ACCOUNTS_GROUP,JSON.stringify(e))}},u=c,l=n("xk4V"),d=n.n(l),p=n("D2p8"),f=n("BlMG");function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return g})),n.d(t,"e",(function(){return b})),n.d(t,"d",(function(){return y})),n.d(t,"c",(function(){return _})),n.d(t,"k",(function(){return v})),n.d(t,"b",(function(){return w})),n.d(t,"j",(function(){return S})),n.d(t,"i",(function(){return x})),n.d(t,"g",(function(){return E})),n.d(t,"f",(function(){return O})),n.d(t,"h",(function(){return k}));var g=4,b=function(){return u.getAccountsJSON()},y=function(){return Object.keys(b()).length},_=function(){var e;return h(e={},o.a.MULTIPLE_ACCOUNTS,u.getAccountsJSON()),h(e,o.a.MULTIPLE_ACCOUNTS_GROUP,u.getGroupId()),e},v=function(e,t,n){var r=u.getGroupId();r||(r=function(){var e=d()();return Object(f.c)("".concat("web_account_switcher",".utils.group_created"),{group_id:e,group_count:y()}),e}(),u.setGroupId(r));var o={group_id:r,group_count:y()},i="";n&&(i=n===a.a.ACCOUNT_SWITCHER_MODAL?"modal.":"flyout."),Object(f.c)("".concat("web_account_switcher",".").concat(i).concat(e),Object.assign({},t,o))},w=function(e,t,n){var r=u.getAccountsJSON();r[e.id]=function(e){var t={id:e.id,username:e.username,email:e.email,fullName:e.fullName||e.full_name,imageMediumUrl:e.imageMediumUrl||e.image_medium_url,imageLargeUrl:e.imageLargeUrl||e.image_large_url};return t.fullName&&t.imageMediumUrl&&t.imageLargeUrl||v("utils.incomplete_user_values"),e.partner&&e.partner.is_create?m({},t,{partner:{is_create:e.partner.is_create}}):t}(e),u.setAccounts(JSON.stringify(r)),t&&n&&v("new_account_add_success",{method:t,user_added:e.id},n)},S=function(e){var t=u.getAccountsJSON();delete t[e],u.setAccounts(JSON.stringify(t))},x=function(e,t){if(!u.getAccounts()||e&&!(e.id in b())){if(e.partner&&e.partner.is_linked_business&&t)return void w(m({},e,{email:t.partner&&t.partner.is_linked_business?t.partner.biz_ownership_email:""}));w(e)}},E=function(e,t,n){v("switch_account_success",{destination_user_id:t},n),Object(r.a)(e)},O=function(e,t){p.c.resume(p.a),v("switch_account_failure",{destination_user_id:e},t)},k=function(e){p.c.resume(p.b),Object(f.a)("web.dismiss_account_switcher.".concat(e))}},mUHS:function(e,t,n){"use strict";function r(e,t){return{type:"ROUTE_CHANGE",payload:{action:e,location:t,routePath:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",previousRoutePath:arguments.length>3&&void 0!==arguments[3]?arguments[3]:""}}}function o(e){return{type:"ROUTE_ENTER",payload:{action:"POP",location:e,routePath:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",previousRoutePath:""}}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},oNBt:function(e,t,n){"use strict";var r=n("gjnG"),o=n("AHhP"),a=n.n(o),i=n("Qyif"),s=n("xAAE"),c=n("+NLT"),u=n("BcL7"),l=n("bNQv"),d=n.n(l),p=n("4dcN"),f=n("GoyQ"),m=n.n(f),h=n("4qC0"),g=n.n(h),b=n("7LcF"),y=n("6LVe"),_=[],v={register:function(e){_=_.concat(e)},list:function(){return _}},w=n("3Q3P"),S=n("zpPL"),x=n("573u"),E=n("zwad"),O=n("mBfy"),k=n("TN0d"),C=n("BzPL"),N=n("mUHS");n.d(t,"a",(function(){return T}));var P=function(){return n.e("TitleCommon").then(n.bind(null,"MUpv"))},I=b.a.getLogger("router"),T={NavStatus:{READY:1,TRANSITIONING:2,CANCELED:3}},j=/\$\{(\d+)\}/g,R=/\?\{(\w+)\}/g,L=/\$\{(\w+)\}/g,A=/^([^\?]*?)\?(.*)$/,U=function e(t,n,r,o){var a=t;return m()(t)?(a={},d()(t,(function(t,i){a[e(i,n,r,o)]=e(t,n,r,o)}))):g()(t)&&(a=function(e,t,n,r){var o=!1;return e=e.replace(R,(function(e,t){var r=n[t];return void 0===r&&(o=!0),r})),o?null:(e=e.replace(j,(function(e,n){return t[parseInt(n,10)]})),r&&(e=e.replace(L,(function(e,n){var o=r[n];return t[o]}))),e)}(t,n,r,o)),a},B=function(e){this.pathPattern=new RegExp(e,"i"),this.rawPathPattern=null,this.module="",this.named={},this.options={},this.resource=null,this.extraContent={}};B.fromPlainObject=function(e){var t=e.pathPattern;if(!t)throw new Error("pathPattern is required");var n=new B(t);return"rawPathPattern"in e&&(n.rawPathPattern=e.rawPathPattern),"module"in e&&(n.module=e.module),"named"in e&&(n.named=e.named),"options"in e&&(n.options=e.options),"resource"in e&&(n.resource=e.resource),"extraContent"in e&&(n.extraContent=e.extraContent),n};var D=function(){this.pathPattern=null,this.module="",this.named={},this.options={},this.resource=null,this.extraContent={},this.navigateData=null},G=function(){this.routes=[],this.lastUrl=window.location.href,this.log=b.a.getLogger("Router"),this.navigateStatus=T.NavStatus.READY};Object.assign(G.prototype,a.a),Object.assign(G.prototype,{start:function(){var e=this;if(d()(v.list(),(function(t){var n=B.fromPlainObject(t);e.addRoute(n)})),Object(i.a)()){var t=window.location.href;if(E.a.setEntryUrl(t),window.history.replaceState){var n=document.querySelector("link[rel=canonical]"),r=null;if(n&&(r=n.getAttribute("href")),t!==r&&O.default.isAuthenticated()){var o="state"in window.history?window.history.state:{};try{var a=E.a.appendQueryString(r,E.a.getQueryStringParams());(O.default.isAuthenticated()||-1===r.indexOf("/pin/"))&&window.history.replaceState(o,document.title,a)}catch(s){this.log.error("replaceState failed",s)}this.lastUrl=t}}window.addEventListener("popstate",(function(n){if(t=window.location.href,e.log.debug("popstate fired, lastUrl",e.lastUrl," new URL ",t),!n.state||!n.state.overridePopstate){if(e.lastUrl===t)e.log.debug("ignoring spurious popstate event");else{var r=e.lastUrl.split("?")[0];"/"!==r.substr(-1)&&(r+="/"),O.default.isAuthenticated()||r!==t?e.onStateChange(n):e.log.debug("stripped query params and pathname of location equal to before, ignoring popstate event")}e.lastUrl=t,S.a.instance.dispatch(Object(N.a)("POP",{pathname:window.location.pathname+window.location.search}))}}),!1)}},replaceState:function(e){var t="state"in window.history?window.history.state:{};window.history.replaceState(t,document.title,e),S.a.instance.dispatch(Object(N.a)("REPLACE",{pathname:e})),P().then((function(e){e.default.getInstance().setDefaultTitleText()})),this.lastUrl=window.location.href},pushState:function(e){var t=document.querySelector("link[rel=canonical]");t&&t.parentNode.removeChild(t),window.history.pushState({},document.title,e),S.a.instance.dispatch(Object(N.a)("PUSH",{pathname:e})),P().then((function(e){e.default.getInstance().setDefaultTitleText()})),this.lastUrl=window.location.href},setStatus:function(e){this.navigateStatus=e},getStatus:function(){return this.navigateStatus},navigate:function(e,t,n){var o=this,a=null;if(!O.default.isAuthenticated()){var l=E.a.normalizeUrl(this.lastUrl);a=this.resolve(l)}if(t=t||new y.a,E.a.isOffsiteUrl(e)||t.evt&&t.evt.data&&t.evt.data.useNewTab){var d=null,p=null;return t.evt&&t.evt.data&&(t.evt.data.csrId?p=t.evt.data.csrId:t.evt.data.pinId&&(d=t.evt.data.pinId)),void w.a.open(e,d,p)}var f=E.a.normalizeUrl(e);if(n&&!!n.fromPopState)k.b.publish("site","navigateStarted",{url:e});else{if(r.a.isNewVersionRequired())return Object(C.a)("refresh","denzel_new_version_required_navigate",c.a),void Object(s.a)(e,!1);var m=E.a.getUrlClass(f);if(m===E.a.UrlClass.INVALID)return void I.error("unexpected UrlClass",m,f);var h=t.evt&&t.evt.data&&t.evt.data.forceRefresh;if(!Object(i.a)()||m===E.a.UrlClass.TRUSTED_DIFFERENT_ORIGIN||1===h)return Object(C.a)("refresh","denzel_should_force_refresh",c.a),void Object(s.a)(f,!1);if(t.evt&&t.evt.data&&t.evt.data.newTab)return Object(C.a)("refresh","denzel_new_tab",c.a),void Object(s.a)(e,!0);t.fromNavigate=!0,this.pushState(f)}if(["employees","enabled","full_page_node"].includes(u.a.getInstance().v2GetGroup("sterling_pure_react"))&&!O.default.isLimitedLogin())return Object(C.a)("refresh","denzel_limited_login",c.a),void Object(s.a)(f,!1);this.navigateData=t;var g=this.resolve(f);this.log.debug("route matched",g,f),g&&this.analyzeRoute(g).then((function(){o.routeMatchOptions&&(g.options=o.routeMatchOptions,delete o.routeMatchOptions),!O.default.isAuthenticated()&&(g.extraContent.react_only||!g.extraContent.react_only&&a&&a.extraContent.react_only)?(Object(C.a)("refresh","denzel_bounce_between_react_and_denzel",c.a),Object(s.a)(f,!1)):(3===c.a.instance.site_type||4===c.a.instance.site_type)&&O.default.isAuthenticated()&&g.extraContent.react_only&&(Object(C.a)("refresh","denzel_react_sterling",c.a),Object(s.a)(f,!1))}),(function(e){o.navigate(e,new y.a)}))},analyzeRoute:function(e){var t=this;this.log.debug("onRoute",e),p.a.trackPageview(e.module);var n=e.module;return e.extraContent.perf_log&&x.b.start(n,"NavigateToRender"),new Promise((function(n,o){if(r.a.isNewVersionRequired())return Object(C.a)("refresh","denzel_new_version_required_analyzeRoute",c.a),void window.location.reload();e.extraContent.require_explicit_login&&O.default.get("autologin")&&o(E.a.getLoginUrl()),!O.default.isAuthenticated()&&c.a.instance.is_sterling_on_steroids&&3===c.a.instance.site_type&&Object(s.a)("/admin/oauth/reset_access_token/"),e.extraContent.require_authentication&&!O.default.isAuthenticated()&&(3===c.a.instance.site_type?o("/"):o(E.a.getRegisterUrl({prev:e.navigateData.fromHistoryUid})));var a=O.default.get("is_partner")&&c.a.instance.advertiser,i=c.a.instance.has_sterling_access&&a,u=c.a.instance.has_ads_api_access&&a;!e.extraContent.require_ads_api_or_sterling_access||i||u||Object(s.a)("/",!1),e.extraContent.require_sterling_access&&!i&&Object(s.a)("/",!1),e.extraContent.require_business_user&&!O.default.get("is_partner")&&o("/"),e.extraContent.require_super_user&&!c.a.instance.is_sterling_on_steroids&&o("/");var l=t.getSterlingRedirectUrl(e);l&&(t.routeMatchOptions=e.options,o(l)),n()}))},getSterlingRedirectUrl:function(e){var t=c.a.instance.advertiser,n=null;if(e.extraContent.sterling_redirect_url&&t){var r=e.extraContent.sterling_redirect_url.split("%s"),o=t.id;o&&(n=r[0]+o+r[1])}return n},resolve:function(e){var t=this.resolvePathToRoutePattern(e);if(1===t.length||t.length>1&&!t[0].extraContent.exp_name)return t[0];if(t.length>1){var n=O.default.isAuthenticated(),r=t[0].extraContent.exp_name,o=u.a.getInstance().v2GetGroup(r)||"",a=t[0].extraContent.exp_group_overwrite_unauth;if(!O.default.isAuthenticated()&&a){var i=c.a.instance.cookies;i&&i[r]&&(o=i[r])}for(var s=null,l=null,d=0;d<t.length;d+=1){var p=t[d].extraContent;if(p.exp_group===o)return t[d];p.exp_fallback_auth&&n&&(s=t[d]),p.exp_fallback_unauth&&!n&&(s=t[d]),"control"===p.exp_group&&(l=t[d])}return s||(s=l),s}},resolvePathToRoutePattern:function(e){var t=null,n=null,r=A.exec(e);r?(t=r[1],n=r[2]):t=e;var o=decodeURIComponent(t);"/"!==o.slice(-1)&&(o+="/");for(var a=[],i=!1,s=0;s<this.routes.length;s+=1){var c=this.routes[s],u=c.pathPattern.exec(o);if(u){var l=u.slice(1);a.push(this.subRoute(c,l,n)),i=!0}else if(i)break}return this.navigateData=new y.a,a},addRoute:function(e){this.routes.push(e)},subRoute:function(e,t,n){var r=E.a.getQueryStringParams(n),o=new D;return o.pathPattern=e.pathPattern,o.rawPathPattern=e.rawPathPattern,o.module=U(e.module,t,r,e.named),o.named=U(e.named,t,r,e.named),o.options=U(e.options,t,r,e.named),o.resource=U(e.resource,t,r,e.named),o.extraContent=U(e.extraContent,t,r,e.named),o.navigateData=this.navigateData,o},onStateChange:function(e){this.navigate(window.location.pathname+window.location.search,new y.a,{fromPopState:!0})}});var M=new G;T.NavStatus;T.instance=M},ozRy:function(e,t,n){"use strict";var r=n("q1tI"),o=n.n(r),a=n("kw3W"),i=n("0Bqi"),s=n("iFas"),c=n("Ye/N"),u=n("TiQD"),l=n("joD6"),d=n("n6mq"),p=n("fArA"),f=n("liz/"),m=n("zLLH");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=b(t).call(this,e),n=!o||"object"!==h(o)&&"function"!=typeof o?_(r):o,v(_(_(n)),"componentDidMount",(function(){Object(f.i)(n.props.viewer,n.props.businessUser.data)})),v(_(_(n)),"showLogin",(function(){return n.setState({showLoginModal:!0})})),v(_(_(n)),"hideLogin",(function(){return n.setState({showLoginModal:!1})}));var a=n.props.showAddAccount;return n.state={showLoginModal:!!a},n}var n,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.customTaglineText,n=e.hideAccountSwitchValueProp,r=e.onDismiss,l=e.showAddAccount,p=e.viewer,f=e.enterProMode;return this.state.showLoginModal?o.a.createElement(i.a,{container:s.a.ACCOUNT_SWITCHER_MODAL,onClose:l?r:this.hideLogin,customTaglineText:t,hideAccountSwitchValueProp:n}):o.a.createElement(d.c,{position:"relative"},o.a.createElement(u.b,{accessibilityModalLabel:c.a._("View, add, and switch logged in users","modal which allows user to add and switch multiple accounts"),size:"sm",heading:c.a._("Switch accounts","Short title on modal that allows a user to switch between different Pinterest accounts"),accessibilityCloseLabel:c.a._("Dismiss selection","Label for dismissing the modal"),onDismiss:r},o.a.createElement(a.a,{container:s.a.ACCOUNT_SWITCHER_MODAL,onNavigateButtonClick:function(){return r()},showLogin:this.showLogin,viewer:p,enterProMode:f})))}}])&&g(n.prototype,r),l&&g(n,l),t}(r.Component);t.a=Object(p.compose)(l.a,Object(m.b)({name:"UserResource",key:"businessUser",options:function(e){return{username:e.viewer.username,field_set_key:"linked_partner"}}}))(w)},q23S:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("q1tI"),o=n.n(r),a=n("Ye/N"),i=n("MKeS"),s=n("n6mq"),c=Object(i.a)({chunkName:function(){return"FullPageSignup"},isReady:function(e){return!!n.m[this.resolve(e)]},requireAsync:function(){return Promise.all([n.e(1),n.e(6),n.e(8),n.e(12),n.e("FullPageSignup")]).then(n.bind(null,"pXxl"))},requireSync:function e(t){var r=this.resolve(t);return n(r)},resolve:function e(){return"pXxl"}});function u(e){return o.a.createElement(c,Object.assign({},e,{fallback:o.a.createElement(s.c,{display:"flex",justifyContent:"center",alignItems:"center"},o.a.createElement(s.G,{accessibilityLabel:a.a._("Loading signup form"),show:!0}))}))}},shJ5:function(e,t,n){"use strict";var r=n("q1tI"),o=n.n(r),a=n("Ye/N"),i=n("n6mq"),s={loadingIndicatorMask:{position:"absolute",backgroundColor:"#fff",top:"0",left:"0",right:"0",bottom:"0",opacity:"0.7",borderRadius:"8px",zIndex:"100"},spinner:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",opacity:"1",display:"flex",alignItems:"center",justifyContent:"center",zIndex:"101"}};t.a=function(e){return o.a.createElement("div",null,o.a.createElement("div",{style:s.spinner},o.a.createElement(i.G,{accessibilityLabel:a.a._("Loading"),show:!0})),o.a.createElement("div",{style:s.loadingIndicatorMask}))}},vVbV:function(e,t,n){"use strict";function r(e){return{type:"SET_NUX_PROGRESS",payload:{step:e}}}n.d(t,"a",(function(){return r}))},"x/Ro":function(e,t,n){"use strict";var r=n("dg5e"),o=n("+NLT"),a=n("7LcF"),i=n("eOdZ"),s=n("pDoi"),c=n("kmwA"),u=n("JW66"),l=n("BlMG"),d=new Map([[1,"INVALID_PARAMETERS"],[100,"INVALID_NETWORK_ACCESS_TOKEN"],[105,"FACEBOOK_ACCOUNT_NOT_LINKED"],[12,"API_SERVER_ERROR"],[1202,"LOGIN_MFA_TOKEN_INVALID"],[1203,"MFA_CONNECTION_ERROR"],[13,"API_DOWN"],[181,"GPLUS_CONNECTION_ERROR"],[14,"API_SERVER_SPAM_CONTENT"],[16,"API_REQUEST_TIMEOUT"],[50,"API_ERROR_PIN_NOT_FOUND"],[77,"INVALID_PASSWORD_FB_USER"],[78,"INVALID_PASSWORD_ERROR_CODE"],[79,"INVALID_EMAIL_ERROR_CODE"],[80,"INVALID_EMAIL_OR_PASSWORD"],[82,"LOGIN_DEACTIVATED_USER"],[83,"LOGIN_POLICY_VIOLATION_USER"],[85,"AUTO_PASSWORD_RESET_ERROR_CODE"],[86,"LOGIN_PANICKED_USER"],[87,"LOGIN_SOFT_BANNED_USER"],[93,"API_ERROR_UNDERAGE_REGISTER_ATTEMPT"],[99,"LOGIN_PASSWORD_NOT_CREATED"],[8,"API_LIMIT_EXCEEDED_ERROR"],[9,"API_EVENT_BLOCKED_ERROR"],[19,"USER_IN_SAFE_MODE"],[84,"LOGIN_VOLUNTARILY_DEACTIVATED_USER"],[85,"LOGIN_BAD_PASSWORD_ASK_RESET"],[1201,"LOGIN_MFA_REQUIRED"],[30,"LOGIN_USER_NOT_FOUND"],[88,"LOGIN_HARD_BANNED_USER"],[429,"RESPONSE_CODE_TOO_MANY_REQUESTS"]]);function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown_source",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e){var o=e.http_status===u.a.RESPONSE_CODE_TOO_MANY_REQUESTS?u.a.RESPONSE_CODE_TOO_MANY_REQUESTS:e.api_error_code,a=o;d.has(o)&&(a=d.get(o));var i=t.container;r?Object(l.a)("unauth_web_client_cctld_login_api_error.".concat(String(a),".").concat(i||"unknow_container",".").concat(n)):Object(l.a)("unauth_web_client_login_api_error.".concat(String(a),".").concat(i||"unknow_container",".").concat(n))}}var f=n("UPfj"),m=n("VL22"),h=n("53sj");function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){b(e,t,n[t])}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=a.a.getLogger("UserLogin"),_=a.a.getLogger("AuthHandshake"),v=function(e){return e.mfa_token?"mfa_token":e.mfa_resend?"mfa_resend":e.facebook_id?m.a.FACEBOOK:e.google_open_id_token?m.a.GOOGLE_ONE_TAP:e.gplus_id_token?m.a.GOOGLE:e.phone_number?"phone_number":e.username_or_email?m.a.EMAIL:m.a.OTHER},w=function(e,t){var n="referrer_unknown";try{var r=document.referrer;n=r?r.indexOf("/t.co/")>-1?"twitter":r.indexOf("google.")>-1?"google":r.indexOf("bing.")>-1?"bing":r.indexOf("facebook.")>-1?"facebook":"other":"direct"}catch(u){}var o=v(e),a=t===Object(t)?t.hybridTier:"tier_unknown",i=t===Object(t)?t.container:"container_unknown";Object(l.a)("login.referrer."+n+"."+o),Object(l.a)("login.container."+i+"."+o),Object(l.a)("login.type."+o);var s=v(e)||"method_unknown",c=t.page||"page_unknown";e.gplus_autologin?Object(l.a)("web_autologin_google"):e.facebook_autologin?Object(l.a)("web_autologin_facebook"):Object(l.a)("web_login.".concat(s,".success.").concat(c,".").concat(i,".").concat(n,".").concat(a))},S=function(e,t){Object(l.a)("web_cross_domain_login.".concat(e,".").concat(v(t)))},x=function(e){return!e.mfa_resend&&!!e.username_or_email},E=function(e,t){return S("attempt",e),r.default.loginUser(e).then((function(n){if(n&&n.data){S("success_with_token",e);var o=n.data;return r.default.exchangeTokenAndSetSession(o).then((function(n){return S("success_token_exchanged",e),w(e,t),_.debug("Cross domain login successful"),Promise.resolve()}),(function(t){throw S("success_token_not_exchanged",e),_.error("Failed to set session for current user; "+t.message),t}))}throw S("success_without_token",e),_.error("No custom access token in cross domain login response"),new Error}),(function(n){throw S("failure",e),p(n,t,v(e),!0),_.error("Failed to login user; "+n.message),n}))};t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3]),r=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;if(x(e)){var u=c.a.settings.CORS_HANDSHAKE_DOMAINS;if(-1!==u.indexOf(o.a.instance.origin))return E(e,t)}e.switch_account&&(e.get_user=!!n||e.get_user);var l=n?null:s.b.localStorage.getItem("visitedPagesBeforeLogin"),d=g({},e,{app_type_from_client:5,visited_pages_before_login:l?JSON.stringify(l):null,recaptchaToken:r,tokenV3:a}),m=i.a.create("UserSessionResource",d),b={showError:!1,async:!0};return m.callCreate(b).then((function(n){return y.debug("Login, successful",n),w(e,t),Object(f.g)(!1),Object(h.a)("login").then((function(){return n}))}),(function(n){return p(n,t,v(e)),Promise.reject(n)}))}}}]);
//# sourceMappingURL=pjs-23-0ac9a72336219e39a401.js.map
